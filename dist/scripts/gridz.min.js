!function(a){a.widget("ui.multiselect",{_init:function(){this.element.hide(),this.id=this.element.attr("id"),this.container=a('<div class="ui-multiselect ui-helper-clearfix ui-widget"></div>').insertAfter(this.element),this.count=0,this.selectedContainer=a('<div class="selected"></div>').appendTo(this.container),this.availableContainer=a('<div class="available"></div>').appendTo(this.container),this.selectedActions=a('<div class="actions ui-widget-header ui-helper-clearfix"><span class="count">0 '+a.ui.multiselect.locale.itemsCount+'</span><a href="#" class="remove-all">'+a.ui.multiselect.locale.removeAll+"</a></div>").appendTo(this.selectedContainer),this.availableActions=a('<div class="actions ui-widget-header ui-helper-clearfix"><input type="text" class="search empty ui-widget-content ui-corner-all"/><a href="#" class="add-all">'+a.ui.multiselect.locale.addAll+"</a></div>").appendTo(this.availableContainer),this.selectedList=a('<ul class="selected connected-list"><li class="ui-helper-hidden-accessible"></li></ul>').bind("selectstart",function(){return!1}).appendTo(this.selectedContainer),this.availableList=a('<ul class="available connected-list"><li class="ui-helper-hidden-accessible"></li></ul>').bind("selectstart",function(){return!1}).appendTo(this.availableContainer);var b=this;this.container.width(this.element.width()+1),this.selectedContainer.width(Math.floor(this.element.width()*this.options.dividerLocation)),this.availableContainer.width(Math.floor(this.element.width()*(1-this.options.dividerLocation))),this.selectedList.height(Math.max(this.element.height()-this.selectedActions.height(),1)),this.availableList.height(Math.max(this.element.height()-this.availableActions.height(),1)),this.options.animated||(this.options.show="show",this.options.hide="hide"),this._populateLists(this.element.find("option")),this.options.sortable&&a("ul.selected").sortable({placeholder:"ui-state-highlight",axis:"y",update:function(){b.selectedList.find("li").each(function(){a(this).data("optionLink")&&a(this).data("optionLink").remove().appendTo(b.element)})},receive:function(c,d){d.item.data("optionLink").attr("selected",!0),b.count+=1,b._updateCount(),b.selectedList.children(".ui-draggable").each(function(){a(this).removeClass("ui-draggable"),a(this).data("optionLink",d.item.data("optionLink")),a(this).data("idx",d.item.data("idx")),b._applyItemState(a(this),!0)}),setTimeout(function(){d.item.remove()},1)}}),this.options.searchable?this._registerSearchEvents(this.availableContainer.find("input.search")):a(".search").hide(),a(".remove-all").click(function(){return b._populateLists(b.element.find("option").removeAttr("selected")),!1}),a(".add-all").click(function(){return b._populateLists(b.element.find("option").attr("selected","selected")),!1})},destroy:function(){this.element.show(),this.container.remove(),a.widget.prototype.destroy.apply(this,arguments)},_populateLists:function(b){this.selectedList.children(".ui-element").remove(),this.availableList.children(".ui-element").remove(),this.count=0;var c=this;a(b.map(function(a){var b=c._getOptionNode(this).appendTo(this.selected?c.selectedList:c.availableList).show();return this.selected&&(c.count+=1),c._applyItemState(b,this.selected),b.data("idx",a),b[0]})),this._updateCount()},_updateCount:function(){this.selectedContainer.find("span.count").text(this.count+" "+a.ui.multiselect.locale.itemsCount)},_getOptionNode:function(b){b=a(b);var c=a('<li class="ui-state-default ui-element" title="'+b.text()+'"><span class="ui-icon"/>'+b.text()+'<a href="#" class="action"><span class="ui-corner-all ui-icon"/></a></li>').hide();return c.data("optionLink",b),c},_cloneWithData:function(a){var b=a.clone();return b.data("optionLink",a.data("optionLink")),b.data("idx",a.data("idx")),b},_setSelected:function(b,c){if(b.data("optionLink").attr("selected",c),c){var d=this._cloneWithData(b);return b[this.options.hide](this.options.animated,function(){a(this).remove()}),d.appendTo(this.selectedList).hide()[this.options.show](this.options.animated),this._applyItemState(d,!0),d}var e=this.availableList.find("li"),f=this.options.nodeComparator,g=null,h=b.data("idx"),i=f(b,a(e[h]));if(i){for(;h>=0&&h<e.length;)if(i>0?h++:h--,i!=f(b,a(e[h]))){g=e[i>0?h:h+1];break}}else g=e[h];var j=this._cloneWithData(b);return g?j.insertBefore(a(g)):j.appendTo(this.availableList),b[this.options.hide](this.options.animated,function(){a(this).remove()}),j.hide()[this.options.show](this.options.animated),this._applyItemState(j,!1),j},_applyItemState:function(a,b){b?(this.options.sortable?a.children("span").addClass("ui-icon-arrowthick-2-n-s").removeClass("ui-helper-hidden").addClass("ui-icon"):a.children("span").removeClass("ui-icon-arrowthick-2-n-s").addClass("ui-helper-hidden").removeClass("ui-icon"),a.find("a.action span").addClass("ui-icon-minus").removeClass("ui-icon-plus"),this._registerRemoveEvents(a.find("a.action"))):(a.children("span").removeClass("ui-icon-arrowthick-2-n-s").addClass("ui-helper-hidden").removeClass("ui-icon"),a.find("a.action span").addClass("ui-icon-plus").removeClass("ui-icon-minus"),this._registerAddEvents(a.find("a.action"))),this._registerHoverEvents(a)},_filter:function(b){var c=a(this),d=b.children("li"),e=d.map(function(){return a(this).text().toLowerCase()}),f=a.trim(c.val().toLowerCase()),g=[];f?(d.hide(),e.each(function(a){this.indexOf(f)>-1&&g.push(a)}),a.each(g,function(){a(d[this]).show()})):d.show()},_registerHoverEvents:function(b){b.removeClass("ui-state-hover"),b.mouseover(function(){a(this).addClass("ui-state-hover")}),b.mouseout(function(){a(this).removeClass("ui-state-hover")})},_registerAddEvents:function(b){var c=this;b.click(function(){return c._setSelected(a(this).parent(),!0),c.count+=1,c._updateCount(),!1}).each(function(){a(this).parent().draggable({connectToSortable:"ul.selected",helper:function(){var b=c._cloneWithData(a(this)).width(a(this).width()-50);return b.width(a(this).width()),b},appendTo:".ui-multiselect",containment:".ui-multiselect",revert:"invalid"})})},_registerRemoveEvents:function(b){var c=this;b.click(function(){return c._setSelected(a(this).parent(),!1),c.count-=1,c._updateCount(),!1})},_registerSearchEvents:function(b){var c=this;b.focus(function(){a(this).addClass("ui-state-active")}).blur(function(){a(this).removeClass("ui-state-active")}).keypress(function(a){return 13==a.keyCode?!1:void 0}).keyup(function(){c._filter.apply(this,[c.availableList])})}}),a.extend(a.ui.multiselect,{defaults:{sortable:!0,searchable:!0,animated:"fast",show:"slideDown",hide:"slideUp",dividerLocation:.6,nodeComparator:function(a,b){var c=a.text(),d=b.text();return c==d?0:d>c?-1:1}},locale:{addAll:"Add all",removeAll:"Remove all",itemsCount:"items selected"}})}(jQuery),function(a){a.jgrid=a.jgrid||{},a.extend(a.jgrid,{defaults:{recordtext:"View {0} - {1} of {2}",emptyrecords:"No records to view",loadtext:"Loading...",pgtext:"Page {0} of {1}"},search:{caption:"Search...",Find:"Find",Reset:"Reset",odata:["equal","not equal","less","less or equal","greater","greater or equal","begins with","does not begin with","is in","is not in","ends with","does not end with","contains","does not contain"],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],matchText:" match",rulesText:" rules"},edit:{addCaption:"Add Record",editCaption:"Edit Record",bSubmit:"Submit",bCancel:"Cancel",bClose:"Close",saveData:"Data has been changed! Save changes?",bYes:"Yes",bNo:"No",bExit:"Cancel",msg:{required:"Field is required",number:"Please, enter valid number",minValue:"value must be greater than or equal to ",maxValue:"value must be less than or equal to",email:"is not a valid e-mail",integer:"Please, enter valid integer value",date:"Please, enter valid date value",url:"is not a valid URL. Prefix required ('http://' or 'https://')",nodefined:" is not defined!",novalue:" return value is required!",customarray:"Custom function should return array!",customfcheck:"Custom function should be present in case of custom checking!"}},view:{caption:"View Record",bClose:"Close"},del:{caption:"Delete",msg:"Delete selected record(s)?",bSubmit:"Delete",bCancel:"Cancel"},nav:{edittext:"",edittitle:"Edit selected row",addtext:"",addtitle:"Add new row",deltext:"",deltitle:"Delete selected row",searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",alerttext:"Please, select row",viewtext:"",viewtitle:"View selected row"},col:{caption:"Select columns",bSubmit:"Ok",bCancel:"Cancel"},errors:{errcap:"Error",nourl:"No url is set",norecords:"No records to process",model:"Length of colNames <> colModel!"},formatter:{integer:{thousandsSeparator:",",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:["Sun","Mon","Tue","Wed","Thr","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],AmPm:["am","pm","AM","PM"],S:function(a){return 11>a||a>13?["st","nd","rd","th"][Math.min((a-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"n/j/Y",masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO",YearMonth:"F, Y"},reformatAfterEdit:!1},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:!0},idName:"id"}})}(jQuery),function($){"use strict";$.jgrid=$.jgrid||{},$.extend($.jgrid,{version:"4.4.4",htmlDecode:function(a){return a&&("&nbsp;"==a||"&#160;"==a||1===a.length&&160===a.charCodeAt(0))?"":a?String(a).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):a},htmlEncode:function(a){return a?String(a).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},format:function(a){var b=$.makeArray(arguments).slice(1);return null==a&&(a=""),a.replace(/\{(\d+)\}/g,function(a,c){return b[c]})},msie:"Microsoft Internet Explorer"==navigator.appName,msiever:function(){var a=-1,b=navigator.userAgent,c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");return null!=c.exec(b)&&(a=parseFloat(RegExp.$1)),a},getCellIndex:function(a){var b=$(a);return b.is("tr")?-1:(b=(b.is("td")||b.is("th")?b:b.closest("td,th"))[0],$.jgrid.msie?$.inArray(b,b.parentNode.cells):b.cellIndex)},stripHtml:function(a){a=String(a);var b=/<("[^"]*"|'[^']*'|[^'">])*>/gi;return a?(a=a.replace(b,""),a&&"&nbsp;"!==a&&"&#160;"!==a?a.replace(/\"/g,"'"):""):a},stripPref:function(a,b){var c=$.type(a);return("string"==c||"number"==c)&&(a=String(a),b=""!==a?String(b).replace(String(a),""):b),b},parse:function(jsonString){var js=jsonString;return"while(1);"==js.substr(0,9)&&(js=js.substr(9)),"/*"==js.substr(0,2)&&(js=js.substr(2,js.length-4)),js||(js="{}"),$.jgrid.useJSON===!0&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(js):eval("("+js+")")},parseDate:function(a,b){var c,d,e,f={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},g=/[\\\/:_;.,\t\s-]/;if(b&&null!=b){b=$.trim(b),b=b.split(g),void 0!==$.jgrid.formatter.date.masks[a]&&(a=$.jgrid.formatter.date.masks[a]),a=a.split(g);var h=$.jgrid.formatter.date.monthNames,i=$.jgrid.formatter.date.AmPm,j=function(a,b){return 0===a?12===b&&(b=0):12!==b&&(b+=12),b};for(c=0,d=a.length;d>c;c++)"M"==a[c]&&(e=$.inArray(b[c],h),-1!==e&&12>e&&(b[c]=e+1,f.m=b[c])),"F"==a[c]&&(e=$.inArray(b[c],h),-1!==e&&e>11&&(b[c]=e+1-12,f.m=b[c])),"a"==a[c]&&(e=$.inArray(b[c],i),-1!==e&&2>e&&b[c]==i[e]&&(b[c]=e,f.h=j(b[c],f.h))),"A"==a[c]&&(e=$.inArray(b[c],i),-1!==e&&e>1&&b[c]==i[e]&&(b[c]=e-2,f.h=j(b[c],f.h))),"g"===a[c]&&(f.h=parseInt(b[c],10)),void 0!==b[c]&&(f[a[c].toLowerCase()]=parseInt(b[c],10));f.m=parseInt(f.m,10)-1;var k=f.y;k>=70&&99>=k?f.y=1900+f.y:k>=0&&69>=k&&(f.y=2e3+f.y),void 0!==f.j&&(f.d=f.j),void 0!==f.n&&(f.m=parseInt(f.n,10)-1)}return new Date(f.y,f.m,f.d,f.h,f.i,f.s,f.u)},jqID:function(a){return String(a).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(a){return(a||$.jgrid.uidPref)+$.jgrid.guid++},getAccessor:function(a,b){var c,d,e,f=[];if("function"==typeof b)return b(a);if(c=a[b],void 0===c)try{if("string"==typeof b&&(f=b.split(".")),e=f.length)for(c=a;c&&e--;)d=f.shift(),c=c[d]}catch(g){}return c},getXmlData:function(a,b,c){var d,e="string"==typeof b?b.match(/^(.*)\[(\w+)\]$/):null;return"function"==typeof b?b(a):e&&e[2]?e[1]?$(e[1],a).attr(e[2]):$(a).attr(e[2]):(d=$(b,a),c?d:d.length>0?$(d).text():void 0)},cellWidth:function(){var a=$("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;'></td></tr></table></div>"),b=a.appendTo("body").find("td").width();return a.remove(),5!==b},cell_width:!0,ajaxOptions:{},from:function(source){var QueryObject=function(d,q){"string"==typeof d&&(d=$.data(d));var self=this,_data=d,_usecase=!0,_trim=!1,_query=q,_stripNum=/[\$,%]/g,_lastCommand=null,_lastField=null,_orDepth=0,_negate=!1,_queuedOperator="",_sorting=[],_useProperties=!0;if("object"!=typeof d||!d.push)throw"data provides is not an array";return d.length>0&&(_useProperties="object"!=typeof d[0]?!1:!0),this._hasData=function(){return null===_data?!1:0===_data.length?!1:!0},this._getStr=function(a){var b=[];return _trim&&b.push("jQuery.trim("),b.push("String("+a+")"),_trim&&b.push(")"),_usecase||b.push(".toLowerCase()"),b.join("")},this._strComp=function(a){return"string"==typeof a?".toString()":""},this._group=function(a,b){return{field:a.toString(),unique:b,items:[]}},this._toStr=function(a){return _trim&&(a=$.trim(a)),a=a.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),_usecase?a:a.toLowerCase()},this._funcLoop=function(a){var b=[];return $.each(_data,function(c,d){b.push(a(d))}),b},this._append=function(a){var b;for(null===_query?_query="":_query+=""===_queuedOperator?" && ":_queuedOperator,b=0;_orDepth>b;b++)_query+="(";_negate&&(_query+="!"),_query+="("+a+")",_negate=!1,_queuedOperator="",_orDepth=0},this._setCommand=function(a,b){_lastCommand=a,_lastField=b},this._resetNegate=function(){_negate=!1},this._repeatCommand=function(a,b){return null===_lastCommand?self:null!==a&&null!==b?_lastCommand(a,b):null===_lastField?_lastCommand(a):_useProperties?_lastCommand(_lastField,a):_lastCommand(a)},this._equals=function(a,b){return 0===self._compare(a,b,1)},this._compare=function(a,b,c){var d=Object.prototype.toString;return void 0===c&&(c=1),void 0===a&&(a=null),void 0===b&&(b=null),null===a&&null===b?0:null===a&&null!==b?1:null!==a&&null===b?-1:"[object Date]"===d.call(a)&&"[object Date]"===d.call(b)?b>a?-c:a>b?c:0:(_usecase||"number"==typeof a||"number"==typeof b||(a=String(a),b=String(b)),b>a?-c:a>b?c:0)},this._performSort=function(){0!==_sorting.length&&(_data=self._doSort(_data,0))},this._doSort=function(a,b){var c=_sorting[b].by,d=_sorting[b].dir,e=_sorting[b].type,f=_sorting[b].datefmt;if(b==_sorting.length-1)return self._getOrder(a,c,d,e,f);b++;var g,h,i,j=self._getGroup(a,c,d,e,f),k=[];for(g=0;g<j.length;g++)for(i=self._doSort(j[g].items,b),h=0;h<i.length;h++)k.push(i[h]);return k},this._getOrder=function(a,b,c,d,e){var f,g,h,i,j=[],k=[],l="a"==c?1:-1;void 0===d&&(d="text"),i="float"==d||"number"==d||"currency"==d||"numeric"==d?function(a){var b=parseFloat(String(a).replace(_stripNum,""));return isNaN(b)?0:b}:"int"==d||"integer"==d?function(a){return a?parseFloat(String(a).replace(_stripNum,"")):0}:"date"==d||"datetime"==d?function(a){return $.jgrid.parseDate(e,a).getTime()}:$.isFunction(d)?d:function(a){return a=a?$.trim(String(a)):"",_usecase?a:a.toLowerCase()},$.each(a,function(a,c){g=""!==b?$.jgrid.getAccessor(c,b):c,void 0===g&&(g=""),g=i(g,c),k.push({vSort:g,index:a})}),k.sort(function(a,b){return a=a.vSort,b=b.vSort,self._compare(a,b,l)}),h=0;for(var m=a.length;m>h;)f=k[h].index,j.push(a[f]),h++;return j},this._getGroup=function(a,b,c,d,e){var f,g=[],h=null,i=null;return $.each(self._getOrder(a,b,c,d,e),function(a,c){f=$.jgrid.getAccessor(c,b),null==f&&(f=""),self._equals(i,f)||(i=f,null!==h&&g.push(h),h=self._group(b,f)),h.items.push(c)}),null!==h&&g.push(h),g},this.ignoreCase=function(){return _usecase=!1,self},this.useCase=function(){return _usecase=!0,self},this.trim=function(){return _trim=!0,self},this.noTrim=function(){return _trim=!1,self},this.execute=function(){var match=_query,results=[];return null===match?self:($.each(_data,function(){eval(match)&&results.push(this)}),_data=results,self)},this.data=function(){return _data},this.select=function(a){if(self._performSort(),!self._hasData())return[];if(self.execute(),$.isFunction(a)){var b=[];return $.each(_data,function(c,d){b.push(a(d))}),b}return _data},this.hasMatch=function(){return self._hasData()?(self.execute(),_data.length>0):!1},this.andNot=function(a,b,c){return _negate=!_negate,self.and(a,b,c)},this.orNot=function(a,b,c){return _negate=!_negate,self.or(a,b,c)},this.not=function(a,b,c){return self.andNot(a,b,c)},this.and=function(a,b,c){return _queuedOperator=" && ",void 0===a?self:self._repeatCommand(a,b,c)},this.or=function(a,b,c){return _queuedOperator=" || ",void 0===a?self:self._repeatCommand(a,b,c)},this.orBegin=function(){return _orDepth++,self},this.orEnd=function(){return null!==_query&&(_query+=")"),self},this.isNot=function(a){return _negate=!_negate,self.is(a)},this.is=function(a){return self._append("this."+a),self._resetNegate(),self},this._compareValues=function(a,b,c,d,e){var f;f=_useProperties?"jQuery.jgrid.getAccessor(this,'"+b+"')":"this",void 0===c&&(c=null);var g=c,h=void 0===e.stype?"text":e.stype;if(null!==c)switch(h){case"int":case"integer":g=isNaN(Number(g))||""===g?"0":g,f="parseInt("+f+",10)",g="parseInt("+g+",10)";break;case"float":case"number":case"numeric":g=String(g).replace(_stripNum,""),g=isNaN(Number(g))||""===g?"0":g,f="parseFloat("+f+")",g="parseFloat("+g+")";break;case"date":case"datetime":g=String($.jgrid.parseDate(e.newfmt||"Y-m-d",g).getTime()),f='jQuery.jgrid.parseDate("'+e.srcfmt+'",'+f+").getTime()";break;default:f=self._getStr(f),g=self._getStr('"'+self._toStr(g)+'"')}return self._append(f+" "+d+" "+g),self._setCommand(a,b),self._resetNegate(),self},this.equals=function(a,b,c){return self._compareValues(self.equals,a,b,"==",c)},this.notEquals=function(a,b,c){return self._compareValues(self.equals,a,b,"!==",c)},this.isNull=function(a,b,c){return self._compareValues(self.equals,a,null,"===",c)},this.greater=function(a,b,c){return self._compareValues(self.greater,a,b,">",c)},this.less=function(a,b,c){return self._compareValues(self.less,a,b,"<",c)},this.greaterOrEquals=function(a,b,c){return self._compareValues(self.greaterOrEquals,a,b,">=",c)},this.lessOrEquals=function(a,b,c){return self._compareValues(self.lessOrEquals,a,b,"<=",c)},this.startsWith=function(a,b){var c=null==b?a:b,d=_trim?$.trim(c.toString()).length:c.toString().length;return _useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".substr(0,"+d+") == "+self._getStr('"'+self._toStr(b)+'"')):(d=_trim?$.trim(b.toString()).length:b.toString().length,self._append(self._getStr("this")+".substr(0,"+d+") == "+self._getStr('"'+self._toStr(a)+'"'))),self._setCommand(self.startsWith,a),self._resetNegate(),self},this.endsWith=function(a,b){var c=null==b?a:b,d=_trim?$.trim(c.toString()).length:c.toString().length;return _useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".substr("+self._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".length-"+d+","+d+') == "'+self._toStr(b)+'"'):self._append(self._getStr("this")+".substr("+self._getStr("this")+'.length-"'+self._toStr(a)+'".length,"'+self._toStr(a)+'".length) == "'+self._toStr(a)+'"'),self._setCommand(self.endsWith,a),self._resetNegate(),self},this.contains=function(a,b){return _useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+'.indexOf("'+self._toStr(b)+'",0) > -1'):self._append(self._getStr("this")+'.indexOf("'+self._toStr(a)+'",0) > -1'),self._setCommand(self.contains,a),self._resetNegate(),self},this.groupBy=function(a,b,c,d){return self._hasData()?self._getGroup(_data,a,b,c,d):null},this.orderBy=function(a,b,c,d){return b=null==b?"a":$.trim(b.toString().toLowerCase()),null==c&&(c="text"),null==d&&(d="Y-m-d"),("desc"==b||"descending"==b)&&(b="d"),("asc"==b||"ascending"==b)&&(b="a"),_sorting.push({by:a,dir:b,type:c,datefmt:d}),self},self};return new QueryObject(source,null)},getMethod:function(a){return this.getAccessor($.fn.jqGrid,a)},extend:function(a){$.extend($.fn.jqGrid,a),this.no_legacy_api||$.fn.extend(a)}}),$.fn.jqGrid=function(a){if("string"==typeof a){var b=$.jgrid.getMethod(a);if(!b)throw"jqGrid - No such method: "+a;var c=$.makeArray(arguments).slice(1);return b.apply(this,c)}return this.each(function(){if(!this.grid){var b=$.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!1,rownumWidth:25,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus",displayField:[]},ignoreCase:!1,cmTemplate:{},idPrefix:""},$.jgrid.defaults,a||{}),c=this,d={headers:[],cols:[],footers:[],dragStart:function(a,d,e){this.resizing={idx:a,startX:d.clientX,sOL:e[0]},this.hDiv.style.cursor="col-resize",this.curGbox=$("#rs_m"+$.jgrid.jqID(b.id),"#gbox_"+$.jgrid.jqID(b.id)),this.curGbox.css({display:"block",left:e[0],top:e[1],height:e[2]}),$(c).triggerHandler("jqGridResizeStart",[d,a]),$.isFunction(b.resizeStart)&&b.resizeStart.call(this,d,a),document.onselectstart=function(){return!1}},dragMove:function(a){if(this.resizing){var c,d,e=a.clientX-this.resizing.startX,f=this.headers[this.resizing.idx],g="ltr"===b.direction?f.width+e:f.width-e;g>33&&(this.curGbox.css({left:this.resizing.sOL+e}),b.forceFit===!0?(c=this.headers[this.resizing.idx+b.nv],d="ltr"===b.direction?c.width-e:c.width+e,d>33&&(f.newWidth=g,c.newWidth=d)):(this.newWidth="ltr"===b.direction?b.tblwidth+e:b.tblwidth-e,f.newWidth=g))}},dragEnd:function(){if(this.hDiv.style.cursor="default",this.resizing){var a=this.resizing.idx,d=this.headers[a].newWidth||this.headers[a].width;d=parseInt(d,10),this.resizing=!1,$("#rs_m"+$.jgrid.jqID(b.id)).css("display","none"),b.colModel[a].width=d,this.headers[a].width=d,this.headers[a].el.style.width=d+"px",this.cols[a].style.width=d+"px",this.footers.length>0&&(this.footers[a].style.width=d+"px"),b.forceFit===!0?(d=this.headers[a+b.nv].newWidth||this.headers[a+b.nv].width,this.headers[a+b.nv].width=d,this.headers[a+b.nv].el.style.width=d+"px",this.cols[a+b.nv].style.width=d+"px",this.footers.length>0&&(this.footers[a+b.nv].style.width=d+"px"),b.colModel[a+b.nv].width=d):(b.tblwidth=this.newWidth||b.tblwidth,$("table:first",this.bDiv).css("width",b.tblwidth+"px"),$("table:first",this.hDiv).css("width",b.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,b.footerrow&&($("table:first",this.sDiv).css("width",b.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft)),$(c).triggerHandler("jqGridResizeStop",[d,a]),$.isFunction(b.resizeStop)&&b.resizeStop.call(this,d,a)}this.curGbox=null,document.onselectstart=function(){return!0}},populateVisible:function(){d.timer&&clearTimeout(d.timer),d.timer=null;var a=$(d.bDiv).height();if(a){var c,e,f=$("table:first",d.bDiv);if(f[0].rows.length)try{c=f[0].rows[1],e=c?$(c).outerHeight()||d.prevRowHeight:d.prevRowHeight}catch(g){e=d.prevRowHeight}if(e){d.prevRowHeight=e;var h,i,j,k=b.rowNum,l=d.scrollTop=d.bDiv.scrollTop,m=Math.round(f.position().top)-l,n=m+f.height(),o=e*k;if(a>n&&0>=m&&(void 0===b.lastpage||parseInt((n+l+o-1)/o,10)<=b.lastpage)&&(i=parseInt((a-n+o-1)/o,10),n>=0||2>i||b.scroll===!0?(h=Math.round((n+l)/o)+1,m=-1):m=1),m>0&&(h=parseInt(l/o,10)+1,i=parseInt((l+a)/o,10)+2-h,j=!0),i){if(b.lastpage&&(h>b.lastpage||1==b.lastpage||h===b.page&&h===b.lastpage))return;d.hDiv.loading?d.timer=setTimeout(d.populateVisible,b.scrollTimeout):(b.page=h,j&&(d.selectionPreserver(f[0]),d.emptyRows.call(f[0],!1,!1)),d.populate(i))}}}},scrollGrid:function(a){if(b.scroll){var c=d.bDiv.scrollTop;void 0===d.scrollTop&&(d.scrollTop=0),c!=d.scrollTop&&(d.scrollTop=c,d.timer&&clearTimeout(d.timer),d.timer=setTimeout(d.populateVisible,b.scrollTimeout))}d.hDiv.scrollLeft=d.bDiv.scrollLeft,b.footerrow&&(d.sDiv.scrollLeft=d.bDiv.scrollLeft),a&&a.stopPropagation()},selectionPreserver:function(a){var b=a.p,c=b.selrow,d=b.selarrrow?$.makeArray(b.selarrrow):null,e=a.grid.bDiv.scrollLeft,f=function(){var g;if(b.selrow=null,b.selarrrow=[],b.multiselect&&d&&d.length>0)for(g=0;g<d.length;g++)d[g]!=c&&$(a).jqGrid("setSelection",d[g],!1,null);c&&$(a).jqGrid("setSelection",c,!1,null),a.grid.bDiv.scrollLeft=e,$(a).unbind(".selectionPreserver",f)};$(a).bind("jqGridGridComplete.selectionPreserver",f)}};if("TABLE"!=this.tagName.toUpperCase())return alert("Element is not a table"),void 0;if(void 0!==document.documentMode&&document.documentMode<=5)return alert("Grid can not be used in this ('quirks') mode!"),void 0;$(this).empty().attr("tabindex","0"),this.p=b,this.p.useProp=!!$.fn.prop;var e,f;if(0===this.p.colNames.length)for(e=0;e<this.p.colModel.length;e++)this.p.colNames[e]=this.p.colModel[e].label||this.p.colModel[e].name;if(this.p.colNames.length!==this.p.colModel.length)return alert($.jgrid.errors.model),void 0;var g=$("<div class='ui-jqgrid-view'></div>"),h=$.jgrid.msie;c.p.direction=$.trim(c.p.direction.toLowerCase()),-1==$.inArray(c.p.direction,["ltr","rtl"])&&(c.p.direction="ltr"),f=c.p.direction,$(g).insertBefore(this),$(this).removeClass("scroll").appendTo(g);var i=$("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");$(i).attr({id:"gbox_"+this.id,dir:f}).insertBefore(g),$(g).attr("id","gview_"+this.id).appendTo(i),$("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").insertBefore(g),$("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(g),$(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var j=["shiftKey","altKey","ctrlKey"],k=function(a,b){return a=parseInt(a,10),isNaN(a)?b||0:a},l=function(a,b,e,f,g,h){var i,j=c.p.colModel[a],k=j.align,l='style="',m=j.classes,n=j.name,o=[];return k&&(l+="text-align:"+k+";"),j.hidden===!0&&(l+="display:none;"),0===b?l+="width: "+d.headers[a].width+"px;":j.cellattr&&$.isFunction(j.cellattr)&&(i=j.cellattr.call(c,g,e,f,j,h),i&&"string"==typeof i&&(i=i.replace(/style/i,"style").replace(/title/i,"title"),i.indexOf("title")>-1&&(j.title=!1),i.indexOf("class")>-1&&(m=void 0),o=i.split("style"),2===o.length?(o[1]=$.trim(o[1].replace("=","")),(0===o[1].indexOf("'")||0===o[1].indexOf('"'))&&(o[1]=o[1].substring(1)),l+=o[1].replace(/'/gi,'"')):l+='"')),o.length||(o[0]="",l+='"'),l+=(void 0!==m?' class="'+m+'"':"")+(j.title&&e?' title="'+$.jgrid.stripHtml(e)+'"':""),l+=' aria-describedby="'+c.p.id+"_"+n+'"',l+o[0]},m=function(a){return null==a||""===a?"&#160;":c.p.autoencode?$.jgrid.htmlEncode(a):String(a)},n=function(a,b,d,e,f){var g,h=c.p.colModel[d];if(void 0!==h.formatter){a=""!==String(c.p.idPrefix)?$.jgrid.stripPref(c.p.idPrefix,a):a;var i={rowId:a,colModel:h,gid:c.p.id,pos:d};g=$.isFunction(h.formatter)?h.formatter.call(c,b,i,e,f):$.fmatter?$.fn.fmatter.call(c,h.formatter,b,i,e,f):m(b)}else g=m(b);return g},o=function(a,b,c,d,e,f){var g,h;return g=n(a,b,c,e,"add"),h=l(c,d,g,e,a,f),'<td role="gridcell" '+h+">"+g+"</td>"},p=function(a,b,d,e){var f='<input role="checkbox" type="checkbox" id="jqg_'+c.p.id+"_"+a+'" class="cbox" name="jqg_'+c.p.id+"_"+a+'"'+(e?'checked="checked"':"")+"/>",g=l(b,d,"",null,a,!0);return'<td role="gridcell" '+g+">"+f+"</td>"},q=function(a,b,c,d){var e=(parseInt(c,10)-1)*parseInt(d,10)+1+b,f=l(a,b,e,null,b,!0);return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+f+">"+e+"</td>"},r=function(a){var b,d,e=[],f=0;for(d=0;d<c.p.colModel.length;d++)b=c.p.colModel[d],"cb"!==b.name&&"subgrid"!==b.name&&"rn"!==b.name&&(e[f]="local"==a?b.name:"xml"==a||"xmlstring"===a?b.xmlmap||b.name:b.jsonmap||b.name,f++);return e},s=function(a){var b=c.p.remapColumns;return b&&b.length||(b=$.map(c.p.colModel,function(a,b){return b})),a&&(b=$.map(b,function(b){return a>b?null:b-a})),b},t=function(a,b){var c;this.p.deepempty?$(this.rows).slice(1).remove():(c=this.rows.length>0?this.rows[0]:null,$(this.firstChild).empty().append(c)),a&&this.p.scroll&&($(this.grid.bDiv.firstChild).css({height:"auto"}),$(this.grid.bDiv.firstChild.firstChild).css({height:0,display:"none"}),0!==this.grid.bDiv.scrollTop&&(this.grid.bDiv.scrollTop=0)),b===!0&&this.p.treeGrid&&(this.p.data=[],this.p._index={})},u=function(){var a,b,d,e=c.p.data.length,f=c.p.rownumbers===!0?1:0,g=c.p.multiselect===!0?1:0,h=c.p.subGrid===!0?1:0;for(a=c.p.keyIndex===!1||c.p.loadonce===!0?c.p.localReader.id:c.p.colModel[c.p.keyIndex+g+h+f].name,b=0;e>b;b++)d=$.jgrid.getAccessor(c.p.data[b],a),void 0===d&&(d=String(b+1)),c.p._index[d]=b},v=function(a,b,d,e,f,g){var h,i="-1",j="",k=b?"display:none;":"",l="ui-widget-content jqgrow ui-row-"+c.p.direction+(d?" "+d:"")+(g?" ui-state-highlight":""),m=$(c).triggerHandler("jqGridRowAttr",[e,f,a]);if("object"!=typeof m&&(m=$.isFunction(c.p.rowattr)?c.p.rowattr.call(c,e,f,a):{}),!$.isEmptyObject(m)){m.hasOwnProperty("id")&&(a=m.id,delete m.id),m.hasOwnProperty("tabindex")&&(i=m.tabindex,delete m.tabindex),m.hasOwnProperty("style")&&(k+=m.style,delete m.style),m.hasOwnProperty("class")&&(l+=" "+m["class"],delete m["class"]);try{delete m.role}catch(n){}for(h in m)m.hasOwnProperty(h)&&(j+=" "+h+"="+m[h])}return'<tr role="row" id="'+a+'" tabindex="'+i+'" class="'+l+'"'+(""===k?"":' style="'+k+'"')+j+">"},w=function(a,b,d,e,f){var g=new Date,h="local"!=c.p.datatype&&c.p.loadonce||"xmlstring"==c.p.datatype,i="_id_",j=c.p.xmlReader,k="local"==c.p.datatype?"local":"xml";if(h&&(c.p.data=[],c.p._index={},c.p.localReader.id=i),c.p.reccount=0,$.isXMLDoc(a)){-1!==c.p.treeANode||c.p.scroll?d=d>1?d:1:(t.call(c,!1,!0),d=1);var l,m,n,u,w,x,y,z,A,B,C=$(c),D=0,E=c.p.multiselect===!0?1:0,F=0,G=c.p.rownumbers===!0?1:0,H=[],I={},J=[],K=c.p.altRows===!0?c.p.altclass:"";
c.p.subGrid===!0&&(F=1,u=$.jgrid.getMethod("addSubGridCell")),j.repeatitems||(H=r(k)),w=c.p.keyIndex===!1?$.isFunction(j.id)?j.id.call(c,a):j.id:c.p.keyIndex,H.length>0&&!isNaN(w)&&(c.p.remapColumns&&c.p.remapColumns.length&&(w=$.inArray(w,c.p.remapColumns)),w=H[w]),x=-1===String(w).indexOf("[")?H.length?function(a,b){return $(w,a).text()||b}:function(a,b){return $(j.cell,a).eq(w).text()||b}:function(a,b){return a.getAttribute(w.replace(/[\[\]]/g,""))||b},c.p.userData={},c.p.page=$.jgrid.getXmlData(a,j.page)||c.p.page||0,c.p.lastpage=$.jgrid.getXmlData(a,j.total),void 0===c.p.lastpage&&(c.p.lastpage=1),c.p.records=$.jgrid.getXmlData(a,j.records)||0,$.isFunction(j.userdata)?c.p.userData=j.userdata.call(c,a)||{}:$.jgrid.getXmlData(a,j.userdata,!0).each(function(){c.p.userData[this.getAttribute("name")]=$(this).text()});var L=$.jgrid.getXmlData(a,j.root,!0);L=$.jgrid.getXmlData(L,j.row,!0),L||(L=[]);var M,N=L.length,O=0,P=[],Q=parseInt(c.p.rowNum,10),R=c.p.scroll?$.jgrid.randId():1;if(N>0&&c.p.page<=0&&(c.p.page=1),L&&N){f&&(Q*=f+1);var S,T=$.isFunction(c.p.afterInsertRow),U=!1;for(c.p.grouping&&(U=c.p.groupingView.groupCollapse===!0,S=$.jgrid.getMethod("groupingPrepare"));N>O;){z=L[O],A=x(z,R+O),A=c.p.idPrefix+A,M=0===d?0:d+1,B=1==(M+O)%2?K:"";var V=J.length;if(J.push(""),G&&J.push(q(0,O,c.p.page,c.p.rowNum)),E&&J.push(p(A,G,O,!1)),F&&J.push(u.call(C,E+G,O+d)),j.repeatitems){y||(y=s(E+F+G));var W=$.jgrid.getXmlData(z,j.cell,!0);$.each(y,function(a){var b=W[this];return b?(n=b.textContent||b.text,I[c.p.colModel[a+E+F+G].name]=n,J.push(o(A,n,a+E+F+G,O+d,z,I)),void 0):!1})}else for(l=0;l<H.length;l++)n=$.jgrid.getXmlData(z,H[l]),I[c.p.colModel[l+E+F+G].name]=n,J.push(o(A,n,l+E+F+G,O+d,z,I));if(J[V]=v(A,U,B,I,z,!1),J.push("</tr>"),c.p.grouping&&(P=S.call(C,J,P,I,O),J=[]),(h||c.p.treeGrid===!0)&&(I[i]=A,c.p.data.push(I),c.p._index[A]=c.p.data.length-1),c.p.gridview===!1&&($("tbody:first",b).append(J.join("")),C.triggerHandler("jqGridAfterInsertRow",[A,I,z]),T&&c.p.afterInsertRow.call(c,A,I,z),J=[]),I={},D++,O++,D==Q)break}}if(c.p.gridview===!0&&(m=c.p.treeANode>-1?c.p.treeANode:0,c.p.grouping?(C.jqGrid("groupingRender",P,c.p.colModel.length),P=null):c.p.treeGrid===!0&&m>0?$(c.rows[m]).after(J.join("")):$("tbody:first",b).append(J.join(""))),c.p.subGrid===!0)try{C.jqGrid("addSubGrid",E+G)}catch(X){}if(c.p.totaltime=new Date-g,D>0&&0===c.p.records&&(c.p.records=N),J=null,c.p.treeGrid===!0)try{C.jqGrid("setTreeNode",m+1,D+m+1)}catch(Y){}if(c.p.treeGrid||c.p.scroll||(c.grid.bDiv.scrollTop=0),c.p.reccount=D,c.p.treeANode=-1,c.p.userDataOnFooter&&C.jqGrid("footerData","set",c.p.userData,!0),h&&(c.p.records=N,c.p.lastpage=Math.ceil(N/Q)),e||c.updatepager(!1,!0),h)for(;N>D;){if(z=L[D],A=x(z,D+R),A=c.p.idPrefix+A,j.repeatitems){y||(y=s(E+F+G));var Z=$.jgrid.getXmlData(z,j.cell,!0);$.each(y,function(a){var b=Z[this];return b?(n=b.textContent||b.text,I[c.p.colModel[a+E+F+G].name]=n,void 0):!1})}else for(l=0;l<H.length;l++)n=$.jgrid.getXmlData(z,H[l]),I[c.p.colModel[l+E+F+G].name]=n;I[i]=A,c.p.data.push(I),c.p._index[A]=c.p.data.length-1,I={},D++}}},x=function(a,b,d,e,f){var g=new Date;if(a){-1!==c.p.treeANode||c.p.scroll?d=d>1?d:1:(t.call(c,!1,!0),d=1);var h,i,j="_id_",k="local"!==c.p.datatype&&c.p.loadonce||"jsonstring"===c.p.datatype;k&&(c.p.data=[],c.p._index={},c.p.localReader.id=j),c.p.reccount=0,"local"===c.p.datatype?(h=c.p.localReader,i="local"):(h=c.p.jsonReader,i="json");var l,m,n,u,w,x,y,z,A,B,C,D,E,F=$(c),G=0,H=[],I=c.p.multiselect?1:0,J=c.p.subGrid===!0?1:0,K=c.p.rownumbers===!0?1:0,L=s(I+J+K),M=r(i),N={},O=[],P=c.p.altRows===!0?c.p.altclass:"";c.p.page=$.jgrid.getAccessor(a,h.page)||c.p.page||0,E=$.jgrid.getAccessor(a,h.total),J&&(w=$.jgrid.getMethod("addSubGridCell")),c.p.lastpage=void 0===E?1:E,c.p.records=$.jgrid.getAccessor(a,h.records)||0,c.p.userData=$.jgrid.getAccessor(a,h.userdata)||{},A=c.p.keyIndex===!1?$.isFunction(h.id)?h.id.call(c,a):h.id:c.p.keyIndex,h.repeatitems||(H=M,H.length>0&&!isNaN(A)&&(c.p.remapColumns&&c.p.remapColumns.length&&(A=$.inArray(A,c.p.remapColumns)),A=H[A])),z=$.jgrid.getAccessor(a,h.root),null==z&&$.isArray(a)&&(z=a),z||(z=[]),y=z.length,m=0,y>0&&c.p.page<=0&&(c.p.page=1);var Q,R,S=parseInt(c.p.rowNum,10),T=c.p.scroll?$.jgrid.randId():1,U=!1;f&&(S*=f+1),"local"!==c.p.datatype||c.p.deselectAfterSort||(U=!0);var V,W=$.isFunction(c.p.afterInsertRow),X=[],Y=!1;for(c.p.grouping&&(Y=c.p.groupingView.groupCollapse===!0,V=$.jgrid.getMethod("groupingPrepare"));y>m;){if(u=z[m],C=$.jgrid.getAccessor(u,A),void 0===C&&("number"==typeof A&&null!=c.p.colModel[A+I+J+K]&&(C=$.jgrid.getAccessor(u,c.p.colModel[A+I+J+K].name)),void 0===C&&(C=T+m,0===H.length&&h.cell))){var Z=$.jgrid.getAccessor(u,h.cell)||u;C=null!=Z&&void 0!==Z[A]?Z[A]:C,Z=null}C=c.p.idPrefix+C,Q=1===d?0:d,D=1===(Q+m)%2?P:"",U&&(R=c.p.multiselect?-1!==$.inArray(C,c.p.selarrrow):C===c.p.selrow);var _=O.length;for(O.push(""),K&&O.push(q(0,m,c.p.page,c.p.rowNum)),I&&O.push(p(C,K,m,R)),J&&O.push(w.call(F,I+K,m+d)),x=M,h.repeatitems&&(h.cell&&(u=$.jgrid.getAccessor(u,h.cell)||u),$.isArray(u)&&(x=L)),n=0;n<x.length;n++)l=$.jgrid.getAccessor(u,x[n]),N[c.p.colModel[n+I+J+K].name]=l,O.push(o(C,l,n+I+J+K,m+d,u,N));if(O[_]=v(C,Y,D,N,u,R),O.push("</tr>"),c.p.grouping&&(X=V.call(F,O,X,N,m),O=[]),(k||c.p.treeGrid===!0)&&(N[j]=C,c.p.data.push(N),c.p._index[C]=c.p.data.length-1),c.p.gridview===!1&&($("#"+$.jgrid.jqID(c.p.id)+" tbody:first").append(O.join("")),F.triggerHandler("jqGridAfterInsertRow",[C,N,u]),W&&c.p.afterInsertRow.call(c,C,N,u),O=[]),N={},G++,m++,G===S)break}if(c.p.gridview===!0&&(B=c.p.treeANode>-1?c.p.treeANode:0,c.p.grouping?(F.jqGrid("groupingRender",X,c.p.colModel.length),X=null):c.p.treeGrid===!0&&B>0?$(c.rows[B]).after(O.join("")):$("#"+$.jgrid.jqID(c.p.id)+" tbody:first").append(O.join(""))),c.p.subGrid===!0)try{F.jqGrid("addSubGrid",I+K)}catch(ab){}if(c.p.totaltime=new Date-g,G>0&&0===c.p.records&&(c.p.records=y),O=null,c.p.treeGrid===!0)try{F.jqGrid("setTreeNode",B+1,G+B+1)}catch(bb){}if(c.p.treeGrid||c.p.scroll||(c.grid.bDiv.scrollTop=0),c.p.reccount=G,c.p.treeANode=-1,c.p.userDataOnFooter&&F.jqGrid("footerData","set",c.p.userData,!0),k&&(c.p.records=y,c.p.lastpage=Math.ceil(y/S)),e||c.updatepager(!1,!0),k)for(;y>G&&z[G];){if(u=z[G],C=$.jgrid.getAccessor(u,A),void 0===C&&("number"==typeof A&&null!=c.p.colModel[A+I+J+K]&&(C=$.jgrid.getAccessor(u,c.p.colModel[A+I+J+K].name)),void 0===C&&(C=T+G,0===H.length&&h.cell))){var cb=$.jgrid.getAccessor(u,h.cell)||u;C=null!=cb&&void 0!==cb[A]?cb[A]:C,cb=null}if(u){for(C=c.p.idPrefix+C,x=M,h.repeatitems&&(h.cell&&(u=$.jgrid.getAccessor(u,h.cell)),$.isArray(u)&&(x=L)),n=0;n<x.length;n++)N[c.p.colModel[n+I+J+K].name]=$.jgrid.getAccessor(u,x[n]);N[j]=C,c.p.data.push(N),c.p._index[C]=c.p.data.length-1,N={}}G++}}},y=function(){function a(b){var c,d,e,f,g,i=0;if(null!=b.groups){for(d=b.groups.length&&"OR"===b.groupOp.toString().toUpperCase(),d&&o.orBegin(),c=0;c<b.groups.length;c++){i>0&&d&&o.or();try{a(b.groups[c])}catch(j){alert(j)}i++}d&&o.orEnd()}if(null!=b.rules)try{for(e=b.rules.length&&"OR"===b.groupOp.toString().toUpperCase(),e&&o.orBegin(),c=0;c<b.rules.length;c++)g=b.rules[c],f=b.groupOp.toString().toUpperCase(),n[g.op]&&g.field&&(i>0&&f&&"OR"===f&&(o=o.or()),o=n[g.op](o,f)(g.field,g.data,h[g.field])),i++;e&&o.orEnd()}catch(k){alert(k)}}var b,d,e,f,g=!1,h={},i=[],j=[];if($.isArray(c.p.data)){var k,l,m=c.p.grouping?c.p.groupingView:!1;if($.each(c.p.colModel,function(){if(e=this.sorttype||"text","date"==e||"datetime"==e?(this.formatter&&"string"==typeof this.formatter&&"date"==this.formatter?(d=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:$.jgrid.formatter.date.srcformat,f=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:$.jgrid.formatter.date.newformat):d=f=this.datefmt||"Y-m-d",h[this.name]={stype:e,srcfmt:d,newfmt:f}):h[this.name]={stype:e,srcfmt:"",newfmt:""},c.p.grouping)for(l=0,k=m.groupField.length;k>l;l++)if(this.name==m.groupField[l]){var a=this.name;this.index&&(a=this.index),i[l]=h[a],j[l]=a}g||this.index!=c.p.sortname&&this.name!=c.p.sortname||(b=this.name,g=!0)}),c.p.treeGrid)return $(c).jqGrid("SortTree",b,c.p.sortorder,h[b].stype,h[b].srcfmt),void 0;var n={eq:function(a){return a.equals},ne:function(a){return a.notEquals},lt:function(a){return a.less},le:function(a){return a.lessOrEquals},gt:function(a){return a.greater},ge:function(a){return a.greaterOrEquals},cn:function(a){return a.contains},nc:function(a,b){return"OR"===b?a.orNot().contains:a.andNot().contains},bw:function(a){return a.startsWith},bn:function(a,b){return"OR"===b?a.orNot().startsWith:a.andNot().startsWith},en:function(a,b){return"OR"===b?a.orNot().endsWith:a.andNot().endsWith},ew:function(a){return a.endsWith},ni:function(a,b){return"OR"===b?a.orNot().equals:a.andNot().equals},"in":function(a){return a.equals},nu:function(a){return a.isNull},nn:function(a,b){return"OR"===b?a.orNot().isNull:a.andNot().isNull}},o=$.jgrid.from(c.p.data);if(c.p.ignoreCase&&(o=o.ignoreCase()),c.p.search===!0){var p=c.p.postData.filters;if(p)"string"==typeof p&&(p=$.jgrid.parse(p)),a(p);else try{o=n[c.p.postData.searchOper](o)(c.p.postData.searchField,c.p.postData.searchString,h[c.p.postData.searchField])}catch(q){}}if(c.p.grouping)for(l=0;k>l;l++)o.orderBy(j[l],m.groupOrder[l],i[l].stype,i[l].srcfmt);b&&c.p.sortorder&&g&&("DESC"==c.p.sortorder.toUpperCase()?o.orderBy(c.p.sortname,"d",h[b].stype,h[b].srcfmt):o.orderBy(c.p.sortname,"a",h[b].stype,h[b].srcfmt));var r=o.select(),s=parseInt(c.p.rowNum,10),t=r.length,u=parseInt(c.p.page,10),v=Math.ceil(t/s),w={};return r=r.slice((u-1)*s,u*s),o=null,h=null,w[c.p.localReader.total]=v,w[c.p.localReader.page]=u,w[c.p.localReader.records]=t,w[c.p.localReader.root]=r,w[c.p.localReader.userdata]=c.p.userData,r=null,w}},z=function(a,b){var d,e,f,g,h,i,j,l,m="",n=c.p.pager?"_"+$.jgrid.jqID(c.p.pager.substr(1)):"",o=c.p.toppager?"_"+c.p.toppager.substr(1):"";if(f=parseInt(c.p.page,10)-1,0>f&&(f=0),f*=parseInt(c.p.rowNum,10),h=f+c.p.reccount,c.p.scroll){var p=$("tbody:first > tr:gt(0)",c.grid.bDiv);f=h-p.length,c.p.reccount=p.length;var q=p.outerHeight()||c.grid.prevRowHeight;if(q){var r=f*q,s=parseInt(c.p.records,10)*q;$(">div:first",c.grid.bDiv).css({height:s}).children("div:first").css({height:r,display:r?"":"none"})}c.grid.bDiv.scrollLeft=c.grid.hDiv.scrollLeft}m=c.p.pager||"",m+=c.p.toppager?m?","+c.p.toppager:c.p.toppager:"",m&&(j=$.jgrid.formatter.integer||{},d=k(c.p.page),e=k(c.p.lastpage),$(".selbox",m)[this.p.useProp?"prop":"attr"]("disabled",!1),c.p.pginput===!0&&($(".ui-pg-input",m).val(c.p.page),l=c.p.toppager?"#sp_1"+n+",#sp_1"+o:"#sp_1"+n,$(l).html($.fmatter?$.fmatter.util.NumberFormat(c.p.lastpage,j):c.p.lastpage)),c.p.viewrecords&&(0===c.p.reccount?$(".ui-paging-info",m).html(c.p.emptyrecords):(g=f+1,i=c.p.records,$.fmatter&&(g=$.fmatter.util.NumberFormat(g,j),h=$.fmatter.util.NumberFormat(h,j),i=$.fmatter.util.NumberFormat(i,j)),$(".ui-paging-info",m).html($.jgrid.format(c.p.recordtext,g,h,i)))),c.p.pgbuttons===!0&&(0>=d&&(d=e=0),1==d||0===d?($("#first"+n+", #prev"+n).addClass("ui-state-disabled").removeClass("ui-state-hover"),c.p.toppager&&$("#first_t"+o+", #prev_t"+o).addClass("ui-state-disabled").removeClass("ui-state-hover")):($("#first"+n+", #prev"+n).removeClass("ui-state-disabled"),c.p.toppager&&$("#first_t"+o+", #prev_t"+o).removeClass("ui-state-disabled")),d==e||0===d?($("#next"+n+", #last"+n).addClass("ui-state-disabled").removeClass("ui-state-hover"),c.p.toppager&&$("#next_t"+o+", #last_t"+o).addClass("ui-state-disabled").removeClass("ui-state-hover")):($("#next"+n+", #last"+n).removeClass("ui-state-disabled"),c.p.toppager&&$("#next_t"+o+", #last_t"+o).removeClass("ui-state-disabled")))),a===!0&&c.p.rownumbers===!0&&$("td.jqgrid-rownum",c.rows).each(function(a){$(this).html(f+1+a)}),b&&c.p.jqgdnd&&$(c).jqGrid("gridDnD","updateDnD"),$(c).triggerHandler("jqGridGridComplete"),$.isFunction(c.p.gridComplete)&&c.p.gridComplete.call(c),$(c).triggerHandler("jqGridAfterGridComplete")},A=function(){if(c.grid.hDiv.loading=!0,!c.p.hiddengrid)switch(c.p.loadui){case"disable":break;case"enable":$("#load_"+$.jgrid.jqID(c.p.id)).show();break;case"block":$("#lui_"+$.jgrid.jqID(c.p.id)).show(),$("#load_"+$.jgrid.jqID(c.p.id)).show()}},B=function(){switch(c.grid.hDiv.loading=!1,c.p.loadui){case"disable":break;case"enable":$("#load_"+$.jgrid.jqID(c.p.id)).hide();break;case"block":$("#lui_"+$.jgrid.jqID(c.p.id)).hide(),$("#load_"+$.jgrid.jqID(c.p.id)).hide()}},C=function(a){if(!c.grid.hDiv.loading){var b,d,e=c.p.scroll&&a===!1,f={},g=c.p.prmNames;c.p.page<=0&&(c.p.page=1),null!==g.search&&(f[g.search]=c.p.search),null!==g.nd&&(f[g.nd]=(new Date).getTime()),null!==g.rows&&(f[g.rows]=c.p.rowNum),null!==g.page&&(f[g.page]=c.p.page),null!==g.sort&&(f[g.sort]=c.p.sortname),null!==g.order&&(f[g.order]=c.p.sortorder),null!==c.p.rowTotal&&null!==g.totalrows&&(f[g.totalrows]=c.p.rowTotal);var h=$.isFunction(c.p.loadComplete),i=h?c.p.loadComplete:null,j=0;if(a=a||1,a>1?null!==g.npage?(f[g.npage]=a,j=a-1,a=1):i=function(b){c.p.page++,c.grid.hDiv.loading=!1,h&&c.p.loadComplete.call(c,b),C(a-1)}:null!==g.npage&&delete c.p.postData[g.npage],c.p.grouping){$(c).jqGrid("groupingSetup");var k,l=c.p.groupingView,m="";for(k=0;k<l.groupField.length;k++){var n=l.groupField[k];$.each(c.p.colModel,function(a,b){b.name==n&&b.index&&(n=b.index)}),m+=n+" "+l.groupOrder[k]+", "}f[g.sort]=m+f[g.sort]}$.extend(c.p.postData,f);var o=c.p.scroll?c.rows.length-1:1,p=$(c).triggerHandler("jqGridBeforeRequest");if(p===!1||"stop"===p)return;if($.isFunction(c.p.datatype))return c.p.datatype.call(c,c.p.postData,"load_"+c.p.id),void 0;if($.isFunction(c.p.beforeRequest)&&(p=c.p.beforeRequest.call(c),void 0===p&&(p=!0),p===!1))return;switch(b=c.p.datatype.toLowerCase()){case"json":case"jsonp":case"xml":case"script":$.ajax($.extend({url:c.p.url,type:c.p.mtype,dataType:b,data:$.isFunction(c.p.serializeGridData)?c.p.serializeGridData.call(c,c.p.postData):c.p.postData,success:function(d,f,g){return $.isFunction(c.p.beforeProcessing)&&c.p.beforeProcessing.call(c,d,f,g)===!1?(B(),void 0):("xml"===b?w(d,c.grid.bDiv,o,a>1,j):x(d,c.grid.bDiv,o,a>1,j),$(c).triggerHandler("jqGridLoadComplete",[d]),i&&i.call(c,d),$(c).triggerHandler("jqGridAfterLoadComplete",[d]),e&&c.grid.populateVisible(),(c.p.loadonce||c.p.treeGrid)&&(c.p.datatype="local"),d=null,1===a&&B(),void 0)},error:function(b,d,e){$.isFunction(c.p.loadError)&&c.p.loadError.call(c,b,d,e),1===a&&B(),b=null},beforeSend:function(a,b){var d=!0;return $.isFunction(c.p.loadBeforeSend)&&(d=c.p.loadBeforeSend.call(c,a,b)),void 0===d&&(d=!0),d===!1?!1:(A(),void 0)}},$.jgrid.ajaxOptions,c.p.ajaxGridOptions));break;case"xmlstring":A(),d="string"!=typeof c.p.datastr?c.p.datastr:$.parseXML(c.p.datastr),w(d,c.grid.bDiv),$(c).triggerHandler("jqGridLoadComplete",[d]),h&&c.p.loadComplete.call(c,d),$(c).triggerHandler("jqGridAfterLoadComplete",[d]),c.p.datatype="local",c.p.datastr=null,B();break;case"jsonstring":A(),d="string"==typeof c.p.datastr?$.jgrid.parse(c.p.datastr):c.p.datastr,x(d,c.grid.bDiv),$(c).triggerHandler("jqGridLoadComplete",[d]),h&&c.p.loadComplete.call(c,d),$(c).triggerHandler("jqGridAfterLoadComplete",[d]),c.p.datatype="local",c.p.datastr=null,B();break;case"local":case"clientside":A(),c.p.datatype="local";var q=y();x(q,c.grid.bDiv,o,a>1,j),$(c).triggerHandler("jqGridLoadComplete",[q]),i&&i.call(c,q),$(c).triggerHandler("jqGridAfterLoadComplete",[q]),e&&c.grid.populateVisible(),B()}}},D=function(a){$("#cb_"+$.jgrid.jqID(c.p.id),c.grid.hDiv)[c.p.useProp?"prop":"attr"]("checked",a);var b=c.p.frozenColumns?c.p.id+"_frozen":"";b&&$("#cb_"+$.jgrid.jqID(c.p.id),c.grid.fhDiv)[c.p.useProp?"prop":"attr"]("checked",a)},E=function(a,b){var d,e,g,h,i,j,l,m="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>",n="",o="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",p="",q=function(a){var b;return $.isFunction(c.p.onPaging)&&(b=c.p.onPaging.call(c,a)),c.p.selrow=null,c.p.multiselect&&(c.p.selarrrow=[],D(!1)),c.p.savedRow=[],"stop"==b?!1:!0};if(a=a.substr(1),b+="_"+a,d="pg_"+a,e=a+"_left",g=a+"_center",h=a+"_right",$("#"+$.jgrid.jqID(a)).append("<div id='"+d+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+e+"' align='left'></td><td id='"+g+"' align='center' style='white-space:pre;'></td><td id='"+h+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr"),c.p.rowList.length>0){for(p="<td dir='"+f+"'>",p+="<select class='ui-pg-selbox' role='listbox'>",l=0;l<c.p.rowList.length;l++)p+='<option role="option" value="'+c.p.rowList[l]+'"'+(c.p.rowNum==c.p.rowList[l]?' selected="selected"':"")+">"+c.p.rowList[l]+"</option>";p+="</select></td>"}if("rtl"==f&&(o+=p),c.p.pginput===!0&&(n="<td dir='"+f+"'>"+$.jgrid.format(c.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(a)+"'></span>")+"</td>"),c.p.pgbuttons===!0){var r=["first"+b,"prev"+b,"next"+b,"last"+b];"rtl"==f&&r.reverse(),o+="<td id='"+r[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'></span></td>",o+="<td id='"+r[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'></span></td>",o+=""!==n?m+n+m:"",o+="<td id='"+r[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'></span></td>",o+="<td id='"+r[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'></span></td>"}else""!==n&&(o+=n);"ltr"==f&&(o+=p),o+="</tr></tbody></table>",c.p.viewrecords===!0&&$("td#"+a+"_"+c.p.recordpos,"#"+d).append("<div dir='"+f+"' style='text-align:"+c.p.recordpos+"' class='ui-paging-info'></div>"),$("td#"+a+"_"+c.p.pagerpos,"#"+d).append(o),j=$(".ui-jqgrid").css("font-size")||"11px",$(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+j+";visibility:hidden;' ></div>"),i=$(o).clone().appendTo("#testpg").width(),$("#testpg").remove(),i>0&&(""!==n&&(i+=50),$("td#"+a+"_"+c.p.pagerpos,"#"+d).width(i)),c.p._nvtd=[],c.p._nvtd[0]=i?Math.floor((c.p.width-i)/2):Math.floor(c.p.width/3),c.p._nvtd[1]=0,o=null,$(".ui-pg-selbox","#"+d).bind("change",function(){return q("records")?(c.p.page=Math.round(c.p.rowNum*(c.p.page-1)/this.value-.5)+1,c.p.rowNum=this.value,c.p.pager&&$(".ui-pg-selbox",c.p.pager).val(this.value),c.p.toppager&&$(".ui-pg-selbox",c.p.toppager).val(this.value),C(),!1):!1}),c.p.pgbuttons===!0&&($(".ui-pg-button","#"+d).hover(function(){$(this).hasClass("ui-state-disabled")?this.style.cursor="default":($(this).addClass("ui-state-hover"),this.style.cursor="pointer")},function(){$(this).hasClass("ui-state-disabled")||($(this).removeClass("ui-state-hover"),this.style.cursor="default")}),$("#first"+$.jgrid.jqID(b)+", #prev"+$.jgrid.jqID(b)+", #next"+$.jgrid.jqID(b)+", #last"+$.jgrid.jqID(b)).click(function(){var a=k(c.p.page,1),d=k(c.p.lastpage,1),e=!1,f=!0,g=!0,h=!0,i=!0;return 0===d||1===d?(f=!1,g=!1,h=!1,i=!1):d>1&&a>=1?1===a?(f=!1,g=!1):a===d&&(h=!1,i=!1):d>1&&0===a&&(h=!1,i=!1,a=d-1),q(this.id)?(this.id==="first"+b&&f&&(c.p.page=1,e=!0),this.id==="prev"+b&&g&&(c.p.page=a-1,e=!0),this.id==="next"+b&&h&&(c.p.page=a+1,e=!0),this.id==="last"+b&&i&&(c.p.page=d,e=!0),e&&C(),!1):!1})),c.p.pginput===!0&&$("input.ui-pg-input","#"+d).keypress(function(a){var b=a.charCode||a.keyCode||0;return 13==b?q("user")?($(this).val(k($(this).val(),1)),c.p.page=$(this).val()>0?$(this).val():c.p.page,C(),!1):!1:this})},F=function(a,b,d,e){if(c.p.colModel[b].sortable){var f;if(!(c.p.savedRow.length>0)){if(d||(c.p.lastsort==b?"asc"==c.p.sortorder?c.p.sortorder="desc":"desc"==c.p.sortorder&&(c.p.sortorder="asc"):c.p.sortorder=c.p.colModel[b].firstsortorder||"asc",c.p.page=1),e){if(c.p.lastsort==b&&c.p.sortorder==e&&!d)return;c.p.sortorder=e}var g=c.grid.headers[c.p.lastsort].el,h=c.grid.headers[b].el;if($("span.ui-grid-ico-sort",g).addClass("ui-state-disabled"),$(g).attr("aria-selected","false"),$("span.ui-icon-"+c.p.sortorder,h).removeClass("ui-state-disabled"),$(h).attr("aria-selected","true"),c.p.viewsortcols[0]||c.p.lastsort!=b&&($("span.s-ico",g).hide(),$("span.s-ico",h).show()),a=a.substring(5+c.p.id.length+1),c.p.sortname=c.p.colModel[b].index||a,f=c.p.sortorder,"stop"===$(c).triggerHandler("jqGridSortCol",[a,b,f]))return c.p.lastsort=b,void 0;if($.isFunction(c.p.onSortCol)&&"stop"==c.p.onSortCol.call(c,a,b,f))return c.p.lastsort=b,void 0;if("local"==c.p.datatype?c.p.deselectAfterSort&&$(c).jqGrid("resetSelection"):(c.p.selrow=null,c.p.multiselect&&D(!1),c.p.selarrrow=[],c.p.savedRow=[]),c.p.scroll){var i=c.grid.bDiv.scrollLeft;t.call(c,!0,!1),c.grid.hDiv.scrollLeft=i}c.p.subGrid&&"local"==c.p.datatype&&$("td.sgexpanded","#"+$.jgrid.jqID(c.p.id)).each(function(){$(this).trigger("click")}),C(),c.p.lastsort=b,c.p.sortname!=a&&b&&(c.p.lastsort=b)}}},G=function(){var a,b,e,f,g=0,h=$.jgrid.cell_width?0:k(c.p.cellLayout,0),i=0,j=k(c.p.scrollOffset,0),l=!1,m=0,n=0;$.each(c.p.colModel,function(){if(void 0===this.hidden&&(this.hidden=!1),c.p.grouping&&c.p.autowidth){var a=$.inArray(this.name,c.p.groupingView.groupField);a>=0&&c.p.groupingView.groupColumnShow.length>a&&(this.hidden=!c.p.groupingView.groupColumnShow[a])}this.widthOrg=b=k(this.width,0),this.hidden===!1&&(g+=b+h,this.fixed?m+=b+h:i++,n++)}),isNaN(c.p.width)&&(c.p.width=g+(c.p.shrinkToFit!==!1||isNaN(c.p.height)?0:j)),d.width=c.p.width,c.p.tblwidth=g,c.p.shrinkToFit===!1&&c.p.forceFit===!0&&(c.p.forceFit=!1),c.p.shrinkToFit===!0&&i>0&&(e=d.width-h*i-m,isNaN(c.p.height)||(e-=j,l=!0),g=0,$.each(c.p.colModel,function(d){this.hidden!==!1||this.fixed||(b=Math.round(e*this.width/(c.p.tblwidth-h*i-m)),this.width=b,g+=b,a=d)}),f=0,l?d.width-m-(g+h*i)!==j&&(f=d.width-m-(g+h*i)-j):l||1===Math.abs(d.width-m-(g+h*i))||(f=d.width-m-(g+h*i)),c.p.colModel[a].width+=f,c.p.tblwidth=g+f+h*i+m,c.p.tblwidth>c.p.width&&(c.p.colModel[a].width-=c.p.tblwidth-parseInt(c.p.width,10),c.p.tblwidth=c.p.width))},H=function(a){var b,d=a,e=a;for(b=a+1;b<c.p.colModel.length;b++)if(c.p.colModel[b].hidden!==!0){e=b;break}return e-d},I=function(a){var b=$(c.grid.headers[a].el),d=[b.position().left+b.outerWidth()];return"rtl"==c.p.direction&&(d[0]=c.p.width-d[0]),d[0]-=c.grid.bDiv.scrollLeft,d.push($(c.grid.hDiv).position().top),d.push($(c.grid.bDiv).offset().top-$(c.grid.hDiv).offset().top+$(c.grid.bDiv).height()),d},J=function(a){var b,d=c.grid.headers,e=$.jgrid.getCellIndex(a);for(b=0;b<d.length;b++)if(a===d[b].el){e=b;break}return e};for(this.p.id=this.id,-1==$.inArray(c.p.multikey,j)&&(c.p.multikey=!1),c.p.keyIndex=!1,e=0;e<c.p.colModel.length;e++)c.p.colModel[e]=$.extend(!0,{},c.p.cmTemplate,c.p.colModel[e].template||{},c.p.colModel[e]),c.p.keyIndex===!1&&c.p.colModel[e].key===!0&&(c.p.keyIndex=e);if(c.p.sortorder=c.p.sortorder.toLowerCase(),$.jgrid.cell_width=$.jgrid.cellWidth(),c.p.grouping===!0&&(c.p.scroll=!1,c.p.rownumbers=!1,c.p.treeGrid=!1,c.p.gridview=!0),this.p.treeGrid===!0){try{$(this).jqGrid("setTreeGrid")}catch(K){}"local"!=c.p.datatype&&(c.p.localReader={id:"_id_"})}if(this.p.subGrid)try{$(c).jqGrid("setSubGrid")}catch(L){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:$.jgrid.cell_width?c.p.multiselectWidth+c.p.cellLayout:c.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0})),this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:c.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0})),c.p.xmlReader=$.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},c.p.xmlReader),c.p.jsonReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},c.p.jsonReader),c.p.localReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},c.p.localReader),c.p.scroll&&(c.p.pgbuttons=!1,c.p.pginput=!1,c.p.rowList=[]),c.p.data.length&&u();var M,N,O,P,Q,R,S,T,U,V="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",W="",X="";if(c.p.shrinkToFit===!0&&c.p.forceFit===!0)for(e=c.p.colModel.length-1;e>=0;e--)if(!c.p.colModel[e].hidden){c.p.colModel[e].resizable=!1;break}for("horizontal"==c.p.viewsortcols[1]&&(W=" ui-i-asc",X=" ui-i-desc"),M=h?"class='ui-th-div-ie'":"",U="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+W+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+f+"'></span>",U+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+X+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+f+"'></span></span>",e=0;e<this.p.colNames.length;e++){var Y=c.p.headertitles?' title="'+$.jgrid.stripHtml(c.p.colNames[e])+'"':"";V+="<th id='"+c.p.id+"_"+c.p.colModel[e].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+f+"'"+Y+">",N=c.p.colModel[e].index||c.p.colModel[e].name,V+="<div id='jqgh_"+c.p.id+"_"+c.p.colModel[e].name+"' "+M+">"+c.p.colNames[e],c.p.colModel[e].width=c.p.colModel[e].width?parseInt(c.p.colModel[e].width,10):150,"boolean"!=typeof c.p.colModel[e].title&&(c.p.colModel[e].title=!0),N==c.p.sortname&&(c.p.lastsort=e),V+=U+"</div></th>"}if(V+="</tr></thead>",U=null,$(this).append(V),$("thead tr:first th",this).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),this.p.multiselect){var Z,_=[];$("#cb_"+$.jgrid.jqID(c.p.id),this).bind("click",function(){c.p.selarrrow=[];var a=c.p.frozenColumns===!0?c.p.id+"_frozen":"";this.checked?($(c.rows).each(function(b){b>0&&($(this).hasClass("ui-subgrid")||$(this).hasClass("jqgroup")||$(this).hasClass("ui-state-disabled")||($("#jqg_"+$.jgrid.jqID(c.p.id)+"_"+$.jgrid.jqID(this.id))[c.p.useProp?"prop":"attr"]("checked",!0),$(this).addClass("ui-state-highlight").attr("aria-selected","true"),c.p.selarrrow.push(this.id),c.p.selrow=this.id,a&&($("#jqg_"+$.jgrid.jqID(c.p.id)+"_"+$.jgrid.jqID(this.id),c.grid.fbDiv)[c.p.useProp?"prop":"attr"]("checked",!0),$("#"+$.jgrid.jqID(this.id),c.grid.fbDiv).addClass("ui-state-highlight"))))}),Z=!0,_=[]):($(c.rows).each(function(b){b>0&&($(this).hasClass("ui-subgrid")||$(this).hasClass("ui-state-disabled")||($("#jqg_"+$.jgrid.jqID(c.p.id)+"_"+$.jgrid.jqID(this.id))[c.p.useProp?"prop":"attr"]("checked",!1),$(this).removeClass("ui-state-highlight").attr("aria-selected","false"),_.push(this.id),a&&($("#jqg_"+$.jgrid.jqID(c.p.id)+"_"+$.jgrid.jqID(this.id),c.grid.fbDiv)[c.p.useProp?"prop":"attr"]("checked",!1),$("#"+$.jgrid.jqID(this.id),c.grid.fbDiv).removeClass("ui-state-highlight"))))}),c.p.selrow=null,Z=!1),$(c).triggerHandler("jqGridSelectAll",[Z?c.p.selarrrow:_,Z]),$.isFunction(c.p.onSelectAll)&&c.p.onSelectAll.call(c,Z?c.p.selarrrow:_,Z)})}if(c.p.autowidth===!0){var ab=$(i).innerWidth();c.p.width=ab>0?ab:"nw"}G(),$(i).css("width",d.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+c.p.id+"'>&#160;</div>"),$(g).css("width",d.width+"px"),V=$("thead:first",c).get(0);var bb="";c.p.footerrow&&(bb+="<table role='grid' style='width:"+c.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+f+"'>");var cb=$("tr:first",V),db="<tr class='jqgfirstrow' role='row' style='height:auto'>";if(c.p.disableClick=!1,$("th",cb).each(function(a){O=c.p.colModel[a].width,void 0===c.p.colModel[a].resizable&&(c.p.colModel[a].resizable=!0),c.p.colModel[a].resizable?(P=document.createElement("span"),$(P).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+f).css("cursor","col-resize"),$(this).addClass(c.p.resizeclass)):P="",$(this).css("width",O+"px").prepend(P);var b="";c.p.colModel[a].hidden&&($(this).css("display","none"),b="display:none;"),db+="<td role='gridcell' style='height:0px;width:"+O+"px;"+b+"'></td>",d.headers[a]={width:O,el:this},Q=c.p.colModel[a].sortable,"boolean"!=typeof Q&&(c.p.colModel[a].sortable=!0,Q=!0);var e=c.p.colModel[a].name;"cb"!=e&&"subgrid"!=e&&"rn"!=e&&c.p.viewsortcols[2]&&$(">div",this).addClass("ui-jqgrid-sortable"),Q&&(c.p.viewsortcols[0]?($("div span.s-ico",this).show(),a==c.p.lastsort&&$("div span.ui-icon-"+c.p.sortorder,this).removeClass("ui-state-disabled")):a==c.p.lastsort&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+c.p.sortorder,this).removeClass("ui-state-disabled"))),c.p.footerrow&&(bb+="<td role='gridcell' "+l(a,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(a){if(1==$(a.target).closest("th>span.ui-jqgrid-resize").length){var b=J(this);return c.p.forceFit===!0&&(c.p.nv=H(b)),d.dragStart(b,a,I(b)),!1}}).click(function(a){if(c.p.disableClick)return c.p.disableClick=!1,!1;var b,d,e="th>div.ui-jqgrid-sortable";c.p.viewsortcols[2]||(e="th>div>span>span.ui-grid-ico-sort");var f=$(a.target).closest(e);if(1==f.length){var g=J(this);return c.p.viewsortcols[2]||(b=!0,d=f.attr("sort")),F($("div",this)[0].id,g,b,d),!1}}),c.p.sortable&&$.fn.sortable)try{$(c).jqGrid("sortableColumns",cb)}catch(eb){}c.p.footerrow&&(bb+="</tr></tbody></table>"),db+="</tr>",T=document.createElement("tbody"),this.appendChild(T),$(this).addClass("ui-jqgrid-btable").append(db),db=null;var fb=$("<table class='ui-jqgrid-htable' style='width:"+c.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(V),gb=c.p.caption&&c.p.hiddengrid===!0?!0:!1,hb=$("<div class='ui-jqgrid-hbox"+("rtl"==f?"-rtl":"")+"'></div>");V=null,d.hDiv=document.createElement("div"),$(d.hDiv).css({width:d.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(hb),$(hb).append(fb),fb=null,gb&&$(d.hDiv).hide(),c.p.pager&&("string"==typeof c.p.pager?"#"!=c.p.pager.substr(0,1)&&(c.p.pager="#"+c.p.pager):c.p.pager="#"+$(c.p.pager).attr("id"),$(c.p.pager).css({width:d.width+"px"}).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom").appendTo(i),gb&&$(c.p.pager).hide(),E(c.p.pager,"")),c.p.cellEdit===!1&&c.p.hoverrows===!0&&$(c).bind("mouseover",function(a){S=$(a.target).closest("tr.jqgrow"),"ui-subgrid"!==$(S).attr("class")&&$(S).addClass("ui-state-hover")}).bind("mouseout",function(a){S=$(a.target).closest("tr.jqgrow"),$(S).removeClass("ui-state-hover")});var ib,jb,kb;$(c).before(d.hDiv).click(function(a){if(R=a.target,S=$(R,c.rows).closest("tr.jqgrow"),0===$(S).length||S[0].className.indexOf("ui-state-disabled")>-1||($(R,c).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==c.id)return this;var b=$(R).hasClass("cbox"),d=$(c).triggerHandler("jqGridBeforeSelectRow",[S[0].id,a]);if(d=d===!1||"stop"===d?!1:!0,d&&$.isFunction(c.p.beforeSelectRow)&&(d=c.p.beforeSelectRow.call(c,S[0].id,a)),"A"!=R.tagName&&("INPUT"!=R.tagName&&"TEXTAREA"!=R.tagName&&"OPTION"!=R.tagName&&"SELECT"!=R.tagName||b)&&d===!0)if(ib=S[0].id,jb=$.jgrid.getCellIndex(R),kb=$(R).closest("td,th").html(),$(c).triggerHandler("jqGridCellSelect",[ib,jb,kb,a]),$.isFunction(c.p.onCellSelect)&&c.p.onCellSelect.call(c,ib,jb,kb,a),c.p.cellEdit===!0)if(c.p.multiselect&&b)$(c).jqGrid("setSelection",ib,!0,a);else{ib=S[0].rowIndex;try{$(c).jqGrid("editCell",ib,jb,!0)}catch(e){}}else if(c.p.multikey)a[c.p.multikey]?$(c).jqGrid("setSelection",ib,!0,a):c.p.multiselect&&b&&(b=$("#jqg_"+$.jgrid.jqID(c.p.id)+"_"+ib).is(":checked"),$("#jqg_"+$.jgrid.jqID(c.p.id)+"_"+ib)[c.p.useProp?"prop":"attr"]("checked",b));else if(c.p.multiselect&&c.p.multiboxonly)if(b)$(c).jqGrid("setSelection",ib,!0,a);else{var f=c.p.frozenColumns?c.p.id+"_frozen":"";
$(c.p.selarrrow).each(function(a,b){var d=c.rows.namedItem(b);$(d).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(c.p.id)+"_"+$.jgrid.jqID(b))[c.p.useProp?"prop":"attr"]("checked",!1),f&&($("#"+$.jgrid.jqID(b),"#"+$.jgrid.jqID(f)).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(c.p.id)+"_"+$.jgrid.jqID(b),"#"+$.jgrid.jqID(f))[c.p.useProp?"prop":"attr"]("checked",!1))}),c.p.selarrrow=[],$(c).jqGrid("setSelection",ib,!0,a)}else $(c).jqGrid("setSelection",ib,!0,a)}).bind("reloadGrid",function(a,b){if(c.p.treeGrid===!0&&(c.p.datatype=c.p.treedatatype),b&&b.current&&c.grid.selectionPreserver(c),"local"==c.p.datatype?($(c).jqGrid("resetSelection"),c.p.data.length&&u()):c.p.treeGrid||(c.p.selrow=null,c.p.multiselect&&(c.p.selarrrow=[],D(!1)),c.p.savedRow=[]),c.p.scroll&&t.call(c,!0,!1),b&&b.page){var d=b.page;d>c.p.lastpage&&(d=c.p.lastpage),1>d&&(d=1),c.p.page=d,c.grid.bDiv.scrollTop=c.grid.prevRowHeight?(d-1)*c.grid.prevRowHeight*c.p.rowNum:0}return c.grid.prevRowHeight&&c.p.scroll?(delete c.p.lastpage,c.grid.populateVisible()):c.grid.populate(),c.p._inlinenav===!0&&$(c).jqGrid("showAddEditButtons"),!1}).dblclick(function(a){R=a.target,S=$(R,c.rows).closest("tr.jqgrow"),0!==$(S).length&&(ib=S[0].rowIndex,jb=$.jgrid.getCellIndex(R),$(c).triggerHandler("jqGridDblClickRow",[$(S).attr("id"),ib,jb,a]),$.isFunction(this.p.ondblClickRow)&&c.p.ondblClickRow.call(c,$(S).attr("id"),ib,jb,a))}).bind("contextmenu",function(a){R=a.target,S=$(R,c.rows).closest("tr.jqgrow"),0!==$(S).length&&(c.p.multiselect||$(c).jqGrid("setSelection",S[0].id,!0,a),ib=S[0].rowIndex,jb=$.jgrid.getCellIndex(R),$(c).triggerHandler("jqGridRightClickRow",[$(S).attr("id"),ib,jb,a]),$.isFunction(this.p.onRightClickRow)&&c.p.onRightClickRow.call(c,$(S).attr("id"),ib,jb,a))}),d.bDiv=document.createElement("div"),h&&"auto"===String(c.p.height).toLowerCase()&&(c.p.height="100%"),$(d.bDiv).append($('<div style="position:relative;'+(h&&$.jgrid.msiever()<8?"height:0.01%;":"")+'"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:c.p.height+(isNaN(c.p.height)?"":"px"),width:d.width+"px"}).scroll(d.scrollGrid),$("table:first",d.bDiv).css({width:c.p.tblwidth+"px"}),$.support.tbody||2==$("tbody",this).length&&$("tbody:gt(0)",this).remove(),c.p.multikey&&($.jgrid.msie?$(d.bDiv).bind("selectstart",function(){return!1}):$(d.bDiv).bind("mousedown",function(){return!1})),gb&&$(d.bDiv).hide(),d.cDiv=document.createElement("div");var lb=c.p.hidegrid===!0?$("<a role='link' href='javascript:void(0)'/>").addClass("ui-jqgrid-titlebar-close HeaderButton").hover(function(){lb.addClass("ui-state-hover")},function(){lb.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css("rtl"==f?"left":"right","0px"):"";if($(d.cDiv).append(lb).append("<span class='ui-jqgrid-title"+("rtl"==f?"-rtl":"")+"'>"+c.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix"),$(d.cDiv).insertBefore(d.hDiv),c.p.toolbar[0]&&(d.uDiv=document.createElement("div"),"top"==c.p.toolbar[1]?$(d.uDiv).insertBefore(d.hDiv):"bottom"==c.p.toolbar[1]&&$(d.uDiv).insertAfter(d.hDiv),"both"==c.p.toolbar[1]?(d.ubDiv=document.createElement("div"),$(d.uDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id).insertBefore(d.hDiv),$(d.ubDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id).insertAfter(d.hDiv),gb&&$(d.ubDiv).hide()):$(d.uDiv).width(d.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),gb&&$(d.uDiv).hide()),c.p.toppager&&(c.p.toppager=$.jgrid.jqID(c.p.id)+"_toppager",d.topDiv=$("<div id='"+c.p.toppager+"'></div>")[0],c.p.toppager="#"+c.p.toppager,$(d.topDiv).addClass("ui-state-default ui-jqgrid-toppager").width(d.width).insertBefore(d.hDiv),E(c.p.toppager,"_t")),c.p.footerrow&&(d.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0],hb=$("<div class='ui-jqgrid-hbox"+("rtl"==f?"-rtl":"")+"'></div>"),$(d.sDiv).append(hb).width(d.width).insertAfter(d.hDiv),$(hb).append(bb),d.footers=$(".ui-jqgrid-ftable",d.sDiv)[0].rows[0].cells,c.p.rownumbers&&(d.footers[0].className="ui-state-default jqgrid-rownum"),gb&&$(d.sDiv).hide()),hb=null,c.p.caption){var mb=c.p.datatype;c.p.hidegrid===!0&&($(".ui-jqgrid-titlebar-close",d.cDiv).click(function(a){var b,e=$.isFunction(c.p.onHeaderClick),f=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",g=this;return c.p.toolbar[0]===!0&&("both"==c.p.toolbar[1]&&(f+=", #"+$(d.ubDiv).attr("id")),f+=", #"+$(d.uDiv).attr("id")),b=$(f,"#gview_"+$.jgrid.jqID(c.p.id)).length,"visible"==c.p.gridstate?$(f,"#gbox_"+$.jgrid.jqID(c.p.id)).slideUp("fast",function(){b--,0===b&&($("span",g).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),c.p.gridstate="hidden",$("#gbox_"+$.jgrid.jqID(c.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(c.p.id)).hide(),$(c).triggerHandler("jqGridHeaderClick",[c.p.gridstate,a]),e&&(gb||c.p.onHeaderClick.call(c,c.p.gridstate,a)))}):"hidden"==c.p.gridstate&&$(f,"#gbox_"+$.jgrid.jqID(c.p.id)).slideDown("fast",function(){b--,0===b&&($("span",g).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),gb&&(c.p.datatype=mb,C(),gb=!1),c.p.gridstate="visible",$("#gbox_"+$.jgrid.jqID(c.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(c.p.id)).show(),$(c).triggerHandler("jqGridHeaderClick",[c.p.gridstate,a]),e&&(gb||c.p.onHeaderClick.call(c,c.p.gridstate,a)))}),!1}),gb&&(c.p.datatype="local",$(".ui-jqgrid-titlebar-close",d.cDiv).trigger("click")))}else $(d.cDiv).hide();$(d.hDiv).after(d.bDiv).mousemove(function(a){return d.resizing?(d.dragMove(a),!1):void 0}),$(".ui-jqgrid-labels",d.hDiv).bind("selectstart",function(){return!1}),$(document).mouseup(function(){return d.resizing?(d.dragEnd(),!1):!0}),c.formatCol=l,c.sortData=F,c.updatepager=z,c.refreshIndex=u,c.setHeadCheckBox=D,c.constructTr=v,c.formatter=function(a,b,c,d,e){return n(a,b,c,d,e)},$.extend(d,{populate:C,emptyRows:t}),this.grid=d,c.addXmlData=function(a){w(a,c.grid.bDiv)},c.addJSONData=function(a){x(a,c.grid.bDiv)},this.grid.cols=this.rows[0].cells,$(c).triggerHandler("jqGridInitGrid"),$.isFunction(c.p.onInitGrid)&&c.p.onInitGrid.call(c),C(),c.p.hiddengrid=!1}})},$.jgrid.extend({getGridParam:function(a){var b=this[0];if(b&&b.grid)return a?void 0!==b.p[a]?b.p[a]:null:b.p},setGridParam:function(a){return this.each(function(){this.grid&&"object"==typeof a&&$.extend(!0,this.p,a)})},getDataIDs:function(){var a,b=[],c=0,d=0;return this.each(function(){if(a=this.rows.length,a&&a>0)for(;a>c;)$(this.rows[c]).hasClass("jqgrow")&&(b[d]=this.rows[c].id,d++),c++}),b},setSelection:function(a,b,c){return this.each(function(){function d(a){var b=$(k.grid.bDiv)[0].clientHeight,c=$(k.grid.bDiv)[0].scrollTop,d=$(k.rows[a]).position().top,e=k.rows[a].clientHeight;d+e>=b+c?$(k.grid.bDiv)[0].scrollTop=d-(b+c)+e+c:b+c>d&&c>d&&($(k.grid.bDiv)[0].scrollTop=d)}var e,f,g,h,i,j,k=this;void 0!==a&&(b=b===!1?!1:!0,f=k.rows.namedItem(String(a)),!f||!f.className||f.className.indexOf("ui-state-disabled")>-1||(k.p.scrollrows===!0&&(g=k.rows.namedItem(a).rowIndex,g>=0&&d(g)),k.p.frozenColumns===!0&&(j=k.p.id+"_frozen"),k.p.multiselect?(k.setHeadCheckBox(!1),k.p.selrow=f.id,h=$.inArray(k.p.selrow,k.p.selarrrow),-1===h?("ui-subgrid"!==f.className&&$(f).addClass("ui-state-highlight").attr("aria-selected","true"),e=!0,k.p.selarrrow.push(k.p.selrow)):("ui-subgrid"!==f.className&&$(f).removeClass("ui-state-highlight").attr("aria-selected","false"),e=!1,k.p.selarrrow.splice(h,1),i=k.p.selarrrow[0],k.p.selrow=void 0===i?null:i),$("#jqg_"+$.jgrid.jqID(k.p.id)+"_"+$.jgrid.jqID(f.id))[k.p.useProp?"prop":"attr"]("checked",e),j&&(-1===h?$("#"+$.jgrid.jqID(a),"#"+$.jgrid.jqID(j)).addClass("ui-state-highlight"):$("#"+$.jgrid.jqID(a),"#"+$.jgrid.jqID(j)).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(k.p.id)+"_"+$.jgrid.jqID(a),"#"+$.jgrid.jqID(j))[k.p.useProp?"prop":"attr"]("checked",e)),$(k).triggerHandler("jqGridSelectRow",[f.id,e,c]),k.p.onSelectRow&&b&&k.p.onSelectRow.call(k,f.id,e,c)):"ui-subgrid"!==f.className&&(k.p.selrow!=f.id?($(k.rows.namedItem(k.p.selrow)).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"}),$(f).addClass("ui-state-highlight").attr({"aria-selected":"true",tabindex:"0"}),j&&($("#"+$.jgrid.jqID(k.p.selrow),"#"+$.jgrid.jqID(j)).removeClass("ui-state-highlight"),$("#"+$.jgrid.jqID(a),"#"+$.jgrid.jqID(j)).addClass("ui-state-highlight")),e=!0):e=!1,k.p.selrow=f.id,$(k).triggerHandler("jqGridSelectRow",[f.id,e,c]),k.p.onSelectRow&&b&&k.p.onSelectRow.call(k,f.id,e,c))))})},resetSelection:function(a){return this.each(function(){var b,c,d,e=this;e.p.frozenColumns===!0&&(d=e.p.id+"_frozen"),void 0!==a?(c=a===e.p.selrow?e.p.selrow:a,$("#"+$.jgrid.jqID(e.p.id)+" tbody:first tr#"+$.jgrid.jqID(c)).removeClass("ui-state-highlight").attr("aria-selected","false"),d&&$("#"+$.jgrid.jqID(c),"#"+$.jgrid.jqID(d)).removeClass("ui-state-highlight"),e.p.multiselect&&($("#jqg_"+$.jgrid.jqID(e.p.id)+"_"+$.jgrid.jqID(c),"#"+$.jgrid.jqID(e.p.id))[e.p.useProp?"prop":"attr"]("checked",!1),d&&$("#jqg_"+$.jgrid.jqID(e.p.id)+"_"+$.jgrid.jqID(c),"#"+$.jgrid.jqID(d))[e.p.useProp?"prop":"attr"]("checked",!1),e.setHeadCheckBox(!1)),c=null):e.p.multiselect?($(e.p.selarrrow).each(function(a,c){b=e.rows.namedItem(c),$(b).removeClass("ui-state-highlight").attr("aria-selected","false"),$("#jqg_"+$.jgrid.jqID(e.p.id)+"_"+$.jgrid.jqID(c))[e.p.useProp?"prop":"attr"]("checked",!1),d&&($("#"+$.jgrid.jqID(c),"#"+$.jgrid.jqID(d)).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(e.p.id)+"_"+$.jgrid.jqID(c),"#"+$.jgrid.jqID(d))[e.p.useProp?"prop":"attr"]("checked",!1))}),e.setHeadCheckBox(!1),e.p.selarrrow=[]):e.p.selrow&&($("#"+$.jgrid.jqID(e.p.id)+" tbody:first tr#"+$.jgrid.jqID(e.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),d&&$("#"+$.jgrid.jqID(e.p.selrow),"#"+$.jgrid.jqID(d)).removeClass("ui-state-highlight"),e.p.selrow=null),e.p.cellEdit===!0&&parseInt(e.p.iCol,10)>=0&&parseInt(e.p.iRow,10)>=0&&($("td:eq("+e.p.iCol+")",e.rows[e.p.iRow]).removeClass("edit-cell ui-state-highlight"),$(e.rows[e.p.iRow]).removeClass("selected-row ui-state-hover")),e.p.savedRow=[]})},getRowData:function(a){var b,c,d={},e=!1,f=0;return this.each(function(){var g,h,i=this;if(void 0===a)e=!0,b=[],c=i.rows.length;else{if(h=i.rows.namedItem(a),!h)return d;c=2}for(;c>f;)e&&(h=i.rows[f]),$(h).hasClass("jqgrow")&&($('td[role="gridcell"]',h).each(function(a){if(g=i.p.colModel[a].name,"cb"!==g&&"subgrid"!==g&&"rn"!==g)if(i.p.treeGrid===!0&&g==i.p.ExpandColumn)d[g]=$.jgrid.htmlDecode($("span:first",this).html());else try{d[g]=$.unformat.call(i,this,{rowId:h.id,colModel:i.p.colModel[a]},a)}catch(b){d[g]=$.jgrid.htmlDecode($(this).html())}}),e&&(b.push(d),d={})),f++}),b||d},delRowData:function(a){var b,c,d,e=!1;return this.each(function(){var f=this;if(b=f.rows.namedItem(a),!b)return!1;if(d=b.rowIndex,$(b).remove(),f.p.records--,f.p.reccount--,f.updatepager(!0,!1),e=!0,f.p.multiselect&&(c=$.inArray(a,f.p.selarrrow),-1!=c&&f.p.selarrrow.splice(c,1)),f.p.selrow=f.p.multiselect&&f.p.selarrrow.length>0?f.p.selarrrow[f.p.selarrrow.length-1]:null,"local"==f.p.datatype){var g=$.jgrid.stripPref(f.p.idPrefix,a),h=f.p._index[g];void 0!==h&&(f.p.data.splice(h,1),f.refreshIndex())}if(f.p.altRows===!0&&e){var i=f.p.altclass;$(f.rows).each(function(a){1==a%2?$(this).addClass(i):$(this).removeClass(i)})}}),e},setRowData:function(a,b,c){var d,e,f=!0;return this.each(function(){if(!this.grid)return!1;var g,h,i=this,j=typeof c,k={};if(h=i.rows.namedItem(a),!h)return!1;if(b)try{if($(this.p.colModel).each(function(c){d=this.name;var f=$.jgrid.getAccessor(b,d);void 0!==f&&(k[d]=this.formatter&&"string"==typeof this.formatter&&"date"==this.formatter?$.unformat.date.call(i,f,this):f,g=i.formatter(a,f,c,b,"edit"),e=this.title?{title:$.jgrid.stripHtml(g)}:{},i.p.treeGrid===!0&&d==i.p.ExpandColumn?$("td[role='gridcell']:eq("+c+") > span:first",h).html(g).attr(e):$("td[role='gridcell']:eq("+c+")",h).html(g).attr(e))}),"local"==i.p.datatype){var l,m=$.jgrid.stripPref(i.p.idPrefix,a),n=i.p._index[m];if(i.p.treeGrid)for(l in i.p.treeReader)i.p.treeReader.hasOwnProperty(l)&&delete k[i.p.treeReader[l]];void 0!==n&&(i.p.data[n]=$.extend(!0,i.p.data[n],k)),k=null}}catch(o){f=!1}f&&("string"===j?$(h).addClass(c):"object"===j&&$(h).css(c),$(i).triggerHandler("jqGridAfterGridComplete"))}),f},addRowData:function(a,b,c,d){c||(c="last");var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=!1,t="";return b&&($.isArray(b)?(m=!0,c="last",n=a):(b=[b],m=!1),this.each(function(){var u=this,v=b.length;i=u.p.rownumbers===!0?1:0,g=u.p.multiselect===!0?1:0,h=u.p.subGrid===!0?1:0,m||(void 0!==a?a=String(a):(a=$.jgrid.randId(),u.p.keyIndex!==!1&&(n=u.p.colModel[u.p.keyIndex+g+h+i].name,void 0!==b[0][n]&&(a=b[0][n])))),o=u.p.altclass;for(var w=0,x="",y={},z=$.isFunction(u.p.afterInsertRow)?!0:!1;v>w;){if(p=b[w],f=[],m){try{a=p[n],void 0===a&&(a=$.jgrid.randId())}catch(A){a=$.jgrid.randId()}x=u.p.altRows===!0?0===(u.rows.length-1)%2?o:"":""}for(r=a,a=u.p.idPrefix+a,i&&(t=u.formatCol(0,1,"",null,a,!0),f[f.length]='<td role="gridcell" class="ui-state-default jqgrid-rownum" '+t+">0</td>"),g&&(l='<input role="checkbox" type="checkbox" id="jqg_'+u.p.id+"_"+a+'" class="cbox"/>',t=u.formatCol(i,1,"",null,a,!0),f[f.length]='<td role="gridcell" '+t+">"+l+"</td>"),h&&(f[f.length]=$(u).jqGrid("addSubGridCell",g+i,1)),k=g+h+i;k<u.p.colModel.length;k++)q=u.p.colModel[k],e=q.name,y[e]=p[e],l=u.formatter(a,$.jgrid.getAccessor(p,e),k,p),t=u.formatCol(k,1,l,p,a,y),f[f.length]='<td role="gridcell" '+t+">"+l+"</td>";if(f.unshift(u.constructTr(a,!1,x,y,p,!1)),f[f.length]="</tr>",0===u.rows.length)$("table:first",u.grid.bDiv).append(f.join(""));else switch(c){case"last":$(u.rows[u.rows.length-1]).after(f.join("")),j=u.rows.length-1;break;case"first":$(u.rows[0]).after(f.join("")),j=1;break;case"after":j=u.rows.namedItem(d),j&&($(u.rows[j.rowIndex+1]).hasClass("ui-subgrid")?$(u.rows[j.rowIndex+1]).after(f):$(j).after(f.join(""))),j++;break;case"before":j=u.rows.namedItem(d),j&&($(j).before(f.join("")),j=j.rowIndex),j--}u.p.subGrid===!0&&$(u).jqGrid("addSubGrid",g+i,j),u.p.records++,u.p.reccount++,$(u).triggerHandler("jqGridAfterInsertRow",[a,p,p]),z&&u.p.afterInsertRow.call(u,a,p,p),w++,"local"==u.p.datatype&&(y[u.p.localReader.id]=r,u.p._index[r]=u.p.data.length,u.p.data.push(y),y={})}u.p.altRows!==!0||m||("last"==c?1==(u.rows.length-1)%2&&$(u.rows[u.rows.length-1]).addClass(o):$(u.rows).each(function(a){1==a%2?$(this).addClass(o):$(this).removeClass(o)})),u.updatepager(!0,!0),s=!0})),s},footerData:function(a,b,c){function d(a){var b;for(b in a)if(a.hasOwnProperty(b))return!1;return!0}var e,f,g=!1,h={};return void 0===a&&(a="get"),"boolean"!=typeof c&&(c=!0),a=a.toLowerCase(),this.each(function(){var i,j=this;return j.grid&&j.p.footerrow?"set"==a&&d(b)?!1:(g=!0,$(this.p.colModel).each(function(d){e=this.name,"set"==a?void 0!==b[e]&&(i=c?j.formatter("",b[e],d,b,"edit"):b[e],f=this.title?{title:$.jgrid.stripHtml(i)}:{},$("tr.footrow td:eq("+d+")",j.grid.sDiv).html(i).attr(f),g=!0):"get"==a&&(h[e]=$("tr.footrow td:eq("+d+")",j.grid.sDiv).html())}),void 0):!1}),"get"==a?h:g},showHideCol:function(a,b){return this.each(function(){var c,d=this,e=!1,f=$.jgrid.cell_width?0:d.p.cellLayout;if(d.grid){"string"==typeof a&&(a=[a]),b="none"!=b?"":"none";var g=""===b?!0:!1,h=d.p.groupHeader&&("object"==typeof d.p.groupHeader||$.isFunction(d.p.groupHeader));h&&$(d).jqGrid("destroyGroupHeader",!1),$(this.p.colModel).each(function(h){if(-1!==$.inArray(this.name,a)&&this.hidden===g){if(d.p.frozenColumns===!0&&this.frozen===!0)return!0;$("tr",d.grid.hDiv).each(function(){$(this.cells[h]).css("display",b)}),$(d.rows).each(function(){$(this).hasClass("jqgroup")||$(this.cells[h]).css("display",b)}),d.p.footerrow&&$("tr.footrow td:eq("+h+")",d.grid.sDiv).css("display",b),c=parseInt(this.width,10),"none"===b?d.p.tblwidth-=c+f:d.p.tblwidth+=c+f,this.hidden=!g,e=!0,$(d).triggerHandler("jqGridShowHideCol",[g,this.name,h])}}),e===!0&&(d.p.shrinkToFit!==!0||isNaN(d.p.height)||(d.p.tblwidth+=parseInt(d.p.scrollOffset,10)),$(d).jqGrid("setGridWidth",d.p.shrinkToFit===!0?d.p.tblwidth:d.p.width)),h&&$(d).jqGrid("setGroupHeaders",d.p.groupHeader)}})},hideCol:function(a){return this.each(function(){$(this).jqGrid("showHideCol",a,"none")})},showCol:function(a){return this.each(function(){$(this).jqGrid("showHideCol",a,"")})},remapColumns:function(a,b,c){function d(b){var c;c=b.length?$.makeArray(b):$.extend({},b),$.each(a,function(a){b[a]=c[this]})}function e(b,c){$(">tr"+(c||""),b).each(function(){var b=this,c=$.makeArray(b.cells);$.each(a,function(){var a=c[this];a&&b.appendChild(a)})})}var f=this.get(0);d(f.p.colModel),d(f.p.colNames),d(f.grid.headers),e($("thead:first",f.grid.hDiv),c&&":not(.ui-jqgrid-labels)"),b&&e($("#"+$.jgrid.jqID(f.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot"),f.p.footerrow&&e($("tbody:first",f.grid.sDiv)),f.p.remapColumns&&(f.p.remapColumns.length?d(f.p.remapColumns):f.p.remapColumns=$.makeArray(a)),f.p.lastsort=$.inArray(f.p.lastsort,a),f.p.treeGrid&&(f.p.expColInd=$.inArray(f.p.expColInd,a)),$(f).triggerHandler("jqGridRemapColumns",[a,b,c])},setGridWidth:function(a,b){return this.each(function(){if(this.grid){var c,d,e,f,g=this,h=0,i=$.jgrid.cell_width?0:g.p.cellLayout,j=0,k=!1,l=g.p.scrollOffset,m=0,n=0;if("boolean"!=typeof b&&(b=g.p.shrinkToFit),!isNaN(a)){if(a=parseInt(a,10),g.grid.width=g.p.width=a,$("#gbox_"+$.jgrid.jqID(g.p.id)).css("width",a+"px"),$("#gview_"+$.jgrid.jqID(g.p.id)).css("width",a+"px"),$(g.grid.bDiv).css("width",a+"px"),$(g.grid.hDiv).css("width",a+"px"),g.p.pager&&$(g.p.pager).css("width",a+"px"),g.p.toppager&&$(g.p.toppager).css("width",a+"px"),g.p.toolbar[0]===!0&&($(g.grid.uDiv).css("width",a+"px"),"both"==g.p.toolbar[1]&&$(g.grid.ubDiv).css("width",a+"px")),g.p.footerrow&&$(g.grid.sDiv).css("width",a+"px"),b===!1&&g.p.forceFit===!0&&(g.p.forceFit=!1),b===!0){if($.each(g.p.colModel,function(){this.hidden===!1&&(c=this.widthOrg,h+=c+i,this.fixed?m+=c+i:j++,n++)}),0===j)return;g.p.tblwidth=h,e=a-i*j-m,isNaN(g.p.height)||($(g.grid.bDiv)[0].clientHeight<$(g.grid.bDiv)[0].scrollHeight||1===g.rows.length)&&(k=!0,e-=l),h=0;var o=g.grid.cols.length>0;if($.each(g.p.colModel,function(a){if(this.hidden===!1&&!this.fixed){if(c=this.widthOrg,c=Math.round(e*c/(g.p.tblwidth-i*j-m)),0>c)return;this.width=c,h+=c,g.grid.headers[a].width=c,g.grid.headers[a].el.style.width=c+"px",g.p.footerrow&&(g.grid.footers[a].style.width=c+"px"),o&&(g.grid.cols[a].style.width=c+"px"),d=a}}),!d)return;if(f=0,k?a-m-(h+i*j)!==l&&(f=a-m-(h+i*j)-l):1!==Math.abs(a-m-(h+i*j))&&(f=a-m-(h+i*j)),g.p.colModel[d].width+=f,g.p.tblwidth=h+f+i*j+m,g.p.tblwidth>a){var p=g.p.tblwidth-parseInt(a,10);g.p.tblwidth=a,c=g.p.colModel[d].width=g.p.colModel[d].width-p}else c=g.p.colModel[d].width;g.grid.headers[d].width=c,g.grid.headers[d].el.style.width=c+"px",o&&(g.grid.cols[d].style.width=c+"px"),g.p.footerrow&&(g.grid.footers[d].style.width=c+"px")}g.p.tblwidth&&($("table:first",g.grid.bDiv).css("width",g.p.tblwidth+"px"),$("table:first",g.grid.hDiv).css("width",g.p.tblwidth+"px"),g.grid.hDiv.scrollLeft=g.grid.bDiv.scrollLeft,g.p.footerrow&&$("table:first",g.grid.sDiv).css("width",g.p.tblwidth+"px"))}}})},setGridHeight:function(a){return this.each(function(){var b=this;if(b.grid){var c=$(b.grid.bDiv);c.css({height:a+(isNaN(a)?"":"px")}),b.p.frozenColumns===!0&&$("#"+$.jgrid.jqID(b.p.id)+"_frozen").parent().height(c.height()-16),b.p.height=a,b.p.scroll&&b.grid.populateVisible()}})},setCaption:function(a){return this.each(function(){this.p.caption=a,$("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",this.grid.cDiv).html(a),$(this.grid.cDiv).show()})},setLabel:function(a,b,c,d){return this.each(function(){var e=this,f=-1;if(e.grid&&void 0!==a&&($(e.p.colModel).each(function(b){return this.name==a?(f=b,!1):void 0}),f>=0)){var g=$("tr.ui-jqgrid-labels th:eq("+f+")",e.grid.hDiv);if(b){var h=$(".s-ico",g);$("[id^=jqgh_]",g).empty().html(b).append(h),e.p.colNames[f]=b}c&&("string"==typeof c?$(g).addClass(c):$(g).css(c)),"object"==typeof d&&$(g).attr(d)}})},setCell:function(a,b,c,d,e,f){return this.each(function(){var g,h,i=this,j=-1;if(i.grid&&(isNaN(b)?$(i.p.colModel).each(function(a){return this.name==b?(j=a,!1):void 0}):j=parseInt(b,10),j>=0)){var k=i.rows.namedItem(a);if(k){var l=$("td:eq("+j+")",k);if((""!==c||f===!0)&&(g=i.formatter(a,c,j,k,"edit"),h=i.p.colModel[j].title?{title:$.jgrid.stripHtml(g)}:{},i.p.treeGrid&&$(".tree-wrap",$(l)).length>0?$("span",$(l)).html(g).attr(h):$(l).html(g).attr(h),"local"==i.p.datatype)){var m,n=i.p.colModel[j];c=n.formatter&&"string"==typeof n.formatter&&"date"==n.formatter?$.unformat.date.call(i,c,n):c,m=i.p._index[a],void 0!==m&&(i.p.data[m][n.name]=c)}"string"==typeof d?$(l).addClass(d):d&&$(l).css(d),"object"==typeof e&&$(l).attr(e)}}})},getCell:function(a,b){var c=!1;return this.each(function(){var d=this,e=-1;if(d.grid&&(isNaN(b)?$(d.p.colModel).each(function(a){return this.name===b?(e=a,!1):void 0}):e=parseInt(b,10),e>=0)){var f=d.rows.namedItem(a);if(f)try{c=$.unformat.call(d,$("td:eq("+e+")",f),{rowId:f.id,colModel:d.p.colModel[e]},e)}catch(g){c=$.jgrid.htmlDecode($("td:eq("+e+")",f).html())}}}),c},getCol:function(a,b,c){var d,e,f,g,h=[],i=0;return b="boolean"!=typeof b?!1:b,void 0===c&&(c=!1),this.each(function(){var j=this,k=-1;if(j.grid&&(isNaN(a)?$(j.p.colModel).each(function(b){return this.name===a?(k=b,!1):void 0}):k=parseInt(a,10),k>=0)){var l=j.rows.length,m=0;if(l&&l>0){for(;l>m;){if($(j.rows[m]).hasClass("jqgrow")){try{d=$.unformat.call(j,$(j.rows[m].cells[k]),{rowId:j.rows[m].id,colModel:j.p.colModel[k]},k)}catch(n){d=$.jgrid.htmlDecode(j.rows[m].cells[k].innerHTML)}c?(g=parseFloat(d),i+=g,void 0===f&&(f=e=g),e=Math.min(e,g),f=Math.max(f,g)):b?h.push({id:j.rows[m].id,value:d}):h.push(d)}m++}if(c)switch(c.toLowerCase()){case"sum":h=i;break;case"avg":h=i/l;break;case"count":h=l;break;case"min":h=e;break;case"max":h=f}}}}),h},clearGridData:function(a){return this.each(function(){var b=this;if(b.grid){if("boolean"!=typeof a&&(a=!1),b.p.deepempty)$("#"+$.jgrid.jqID(b.p.id)+" tbody:first tr:gt(0)").remove();else{var c=$("#"+$.jgrid.jqID(b.p.id)+" tbody:first tr:first")[0];$("#"+$.jgrid.jqID(b.p.id)+" tbody:first").empty().append(c)}b.p.footerrow&&a&&$(".ui-jqgrid-ftable td",b.grid.sDiv).html("&#160;"),b.p.selrow=null,b.p.selarrrow=[],b.p.savedRow=[],b.p.records=0,b.p.page=1,b.p.lastpage=0,b.p.reccount=0,b.p.data=[],b.p._index={},b.updatepager(!0,!1)}})},getInd:function(a,b){var c,d=!1;return this.each(function(){c=this.rows.namedItem(a),c&&(d=b===!0?c:c.rowIndex)}),d},bindKeys:function(a){var b=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},a||{});return this.each(function(){var a=this;$("body").is("[role]")||$("body").attr("role","application"),a.p.scrollrows=b.scrollingRows,$(a).keydown(function(c){var d,e,f,g=$(a).find("tr[tabindex=0]")[0],h=a.p.treeReader.expanded_field;if(g)if(f=a.p._index[g.id],37===c.keyCode||38===c.keyCode||39===c.keyCode||40===c.keyCode){if(38===c.keyCode){if(e=g.previousSibling,d="",e)if($(e).is(":hidden")){for(;e;)if(e=e.previousSibling,!$(e).is(":hidden")&&$(e).hasClass("jqgrow")){d=e.id;break}}else d=e.id;$(a).jqGrid("setSelection",d,!0,c),c.preventDefault()}if(40===c.keyCode){if(e=g.nextSibling,d="",e)if($(e).is(":hidden")){for(;e;)if(e=e.nextSibling,!$(e).is(":hidden")&&$(e).hasClass("jqgrow")){d=e.id;break}}else d=e.id;$(a).jqGrid("setSelection",d,!0,c),c.preventDefault()}37===c.keyCode&&(a.p.treeGrid&&a.p.data[f][h]&&$(g).find("div.treeclick").trigger("click"),$(a).triggerHandler("jqGridKeyLeft",[a.p.selrow]),$.isFunction(b.onLeftKey)&&b.onLeftKey.call(a,a.p.selrow)),39===c.keyCode&&(a.p.treeGrid&&!a.p.data[f][h]&&$(g).find("div.treeclick").trigger("click"),$(a).triggerHandler("jqGridKeyRight",[a.p.selrow]),$.isFunction(b.onRightKey)&&b.onRightKey.call(a,a.p.selrow))}else 13===c.keyCode?($(a).triggerHandler("jqGridKeyEnter",[a.p.selrow]),$.isFunction(b.onEnter)&&b.onEnter.call(a,a.p.selrow)):32===c.keyCode&&($(a).triggerHandler("jqGridKeySpace",[a.p.selrow]),$.isFunction(b.onSpace)&&b.onSpace.call(a,a.p.selrow))})})},unbindKeys:function(){return this.each(function(){$(this).unbind("keydown")})},getLocalRow:function(a){var b,c=!1;return this.each(function(){void 0!==a&&(b=this.p._index[a],b>=0&&(c=this.p.data[b]))}),c}})}(jQuery),function(a){"use strict";a.fmatter={},a.extend(a.fmatter,{isBoolean:function(a){return"boolean"==typeof a},isObject:function(b){return b&&("object"==typeof b||a.isFunction(b))||!1},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a&&isFinite(a)},isValue:function(a){return this.isObject(a)||this.isString(a)||this.isNumber(a)||this.isBoolean(a)},isEmpty:function(b){return!this.isString(b)&&this.isValue(b)?!1:this.isValue(b)?(b=a.trim(b).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,""),""===b):!0}}),a.fn.fmatter=function(b,c,d,e,f){var g=c;d=a.extend({},a.jgrid.formatter,d);try{g=a.fn.fmatter[b].call(this,c,d,e,f)}catch(h){}return g},a.fmatter.util={NumberFormat:function(b,c){if(a.fmatter.isNumber(b)||(b*=1),a.fmatter.isNumber(b)){var d,e=0>b,f=String(b),g=c.decimalSeparator||".";if(a.fmatter.isNumber(c.decimalPlaces)){var h=c.decimalPlaces,i=Math.pow(10,h);if(f=String(Math.round(b*i)/i),d=f.lastIndexOf("."),h>0)for(0>d?(f+=g,d=f.length-1):"."!==g&&(f=f.replace(".",g));f.length-1-d<h;)f+="0"}if(c.thousandsSeparator){var j=c.thousandsSeparator;d=f.lastIndexOf(g),d=d>-1?d:f.length;var k,l=f.substring(d),m=-1;for(k=d;k>0;k--)m++,0===m%3&&k!==d&&(!e||k>1)&&(l=j+l),l=f.charAt(k-1)+l;f=l}return f=c.prefix?c.prefix+f:f,f=c.suffix?f+c.suffix:f}return b},DateFormat:function(b,c,d,e){var f,g,h,i=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,j=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,k=/[^-+\dA-Z]/g,l=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),m="string"==typeof c?c.match(l):null,n=function(a,b){for(a=String(a),b=parseInt(b,10)||2;a.length<b;)a="0"+a;return a},o={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},p=0,q=["i18n"];if(q.i18n={dayNames:e.dayNames,monthNames:e.monthNames},e.masks.hasOwnProperty(b)&&(b=e.masks[b]),isNaN(c-0)||"u"!==String(b).toLowerCase())if(c.constructor===Date)p=c;else if(null!==m){if(p=new Date(parseInt(m[1],10)),m[3]){var r=60*Number(m[5])+Number(m[6]);r*="-"===m[4]?1:-1,r-=p.getTimezoneOffset(),p.setTime(Number(Number(p)+1e3*60*r))}}else{for(c=String(c).split(/[\\\/:_;.,\t\s-]/),b=b.split(/[\\\/:_;.,\t\s-]/),g=0,h=b.length;h>g;g++)"M"===b[g]&&(f=a.inArray(c[g],q.i18n.monthNames),-1!==f&&12>f&&(c[g]=f+1)),"F"===b[g]&&(f=a.inArray(c[g],q.i18n.monthNames),-1!==f&&f>11&&(c[g]=f+1-12)),c[g]&&(o[b[g].toLowerCase()]=parseInt(c[g],10));if(o.f&&(o.m=o.f),0===o.m&&0===o.y&&0===o.d)return"&#160;";o.m=parseInt(o.m,10)-1;var s=o.y;s>=70&&99>=s?o.y=1900+o.y:s>=0&&69>=s&&(o.y=2e3+o.y),p=new Date(o.y,o.m,o.d,o.h,o.i,o.s,o.u)}else p=new Date(1e3*parseFloat(c));e.masks.hasOwnProperty(d)?d=e.masks[d]:d||(d="Y-m-d");var t=p.getHours(),u=p.getMinutes(),v=p.getDate(),w=p.getMonth()+1,x=p.getTimezoneOffset(),y=p.getSeconds(),z=p.getMilliseconds(),A=p.getDay(),B=p.getFullYear(),C=(A+6)%7+1,D=(new Date(B,w-1,v)-new Date(B,0,1))/864e5,E={d:n(v),D:q.i18n.dayNames[A],j:v,l:q.i18n.dayNames[A+7],N:C,S:e.S(v),w:A,z:D,W:5>C?Math.floor((D+C-1)/7)+1:Math.floor((D+C-1)/7)||((new Date(B-1,0,1).getDay()+6)%7<4?53:52),F:q.i18n.monthNames[w-1+12],m:n(w),M:q.i18n.monthNames[w-1],n:w,t:"?",L:"?",o:"?",Y:B,y:String(B).substring(2),a:12>t?e.AmPm[0]:e.AmPm[1],A:12>t?e.AmPm[2]:e.AmPm[3],B:"?",g:t%12||12,G:t,h:n(t%12||12),H:n(t),i:n(u),s:n(y),u:z,e:"?",I:"?",O:(x>0?"-":"+")+n(100*Math.floor(Math.abs(x)/60)+Math.abs(x)%60,4),P:"?",T:(String(p).match(j)||[""]).pop().replace(k,""),Z:"?",c:"?",r:"?",U:Math.floor(p/1e3)};return d.replace(i,function(a){return E.hasOwnProperty(a)?E[a]:a.substring(1)})}},a.fn.fmatter.defaultFormat=function(b,c){return a.fmatter.isValue(b)&&""!==b?b:c.defaultValue||"&#160;"},a.fn.fmatter.email=function(b,c){return a.fmatter.isEmpty(b)?a.fn.fmatter.defaultFormat(b,c):'<a href="mailto:'+b+'">'+b+"</a>"},a.fn.fmatter.checkbox=function(b,c){var d,e=a.extend({},c.checkbox);void 0!==c.colModel&&void 0!==c.colModel.formatoptions&&(e=a.extend({},e,c.colModel.formatoptions)),d=e.disabled===!0?'disabled="disabled"':"",(a.fmatter.isEmpty(b)||void 0===b)&&(b=a.fn.fmatter.defaultFormat(b,e)),b=String(b),b=b.toLowerCase();var f=b.search(/(false|f|0|no|n|off|undefined)/i)<0?" checked='checked' ":"";return'<input type="checkbox" '+f+' value="'+b+'" offval="no" '+d+"/>"},a.fn.fmatter.link=function(b,c){var d={target:c.target},e="";return void 0!==c.colModel&&void 0!==c.colModel.formatoptions&&(d=a.extend({},d,c.colModel.formatoptions)),d.target&&(e="target="+d.target),a.fmatter.isEmpty(b)?a.fn.fmatter.defaultFormat(b,c):"<a "+e+' href="'+b+'">'+b+"</a>"},a.fn.fmatter.showlink=function(b,c){var d,e={baseLinkUrl:c.baseLinkUrl,showAction:c.showAction,addParam:c.addParam||"",target:c.target,idName:c.idName},f="";return void 0!==c.colModel&&void 0!==c.colModel.formatoptions&&(e=a.extend({},e,c.colModel.formatoptions)),e.target&&(f="target="+e.target),d=e.baseLinkUrl+e.showAction+"?"+e.idName+"="+c.rowId+e.addParam,a.fmatter.isString(b)||a.fmatter.isNumber(b)?"<a "+f+' href="'+d+'">'+b+"</a>":a.fn.fmatter.defaultFormat(b,c)},a.fn.fmatter.integer=function(b,c){var d=a.extend({},c.integer);return void 0!==c.colModel&&void 0!==c.colModel.formatoptions&&(d=a.extend({},d,c.colModel.formatoptions)),a.fmatter.isEmpty(b)?d.defaultValue:a.fmatter.util.NumberFormat(b,d)},a.fn.fmatter.number=function(b,c){var d=a.extend({},c.number);return void 0!==c.colModel&&void 0!==c.colModel.formatoptions&&(d=a.extend({},d,c.colModel.formatoptions)),a.fmatter.isEmpty(b)?d.defaultValue:a.fmatter.util.NumberFormat(b,d)},a.fn.fmatter.currency=function(b,c){var d=a.extend({},c.currency);return void 0!==c.colModel&&void 0!==c.colModel.formatoptions&&(d=a.extend({},d,c.colModel.formatoptions)),a.fmatter.isEmpty(b)?d.defaultValue:a.fmatter.util.NumberFormat(b,d)},a.fn.fmatter.date=function(b,c,d,e){var f=a.extend({},c.date);return void 0!==c.colModel&&void 0!==c.colModel.formatoptions&&(f=a.extend({},f,c.colModel.formatoptions)),f.reformatAfterEdit||"edit"!==e?a.fmatter.isEmpty(b)?a.fn.fmatter.defaultFormat(b,c):a.fmatter.util.DateFormat(f.srcformat,b,f.newformat,f):a.fn.fmatter.defaultFormat(b,c)},a.fn.fmatter.select=function(b,c){b=String(b);var d,e,f=!1,g=[];if(void 0!==c.colModel.formatoptions?(f=c.colModel.formatoptions.value,d=void 0===c.colModel.formatoptions.separator?":":c.colModel.formatoptions.separator,e=void 0===c.colModel.formatoptions.delimiter?";":c.colModel.formatoptions.delimiter):void 0!==c.colModel.editoptions&&(f=c.colModel.editoptions.value,d=void 0===c.colModel.editoptions.separator?":":c.colModel.editoptions.separator,e=void 0===c.colModel.editoptions.delimiter?";":c.colModel.editoptions.delimiter),f){var h,i=c.colModel.editoptions.multiple===!0?!0:!1,j=[];if(i&&(j=b.split(","),j=a.map(j,function(b){return a.trim(b)})),a.fmatter.isString(f)){var k,l=f.split(e),m=0;for(k=0;k<l.length;k++)if(h=l[k].split(d),h.length>2&&(h[1]=a.map(h,function(a,b){return b>0?a:void 0}).join(d)),i)a.inArray(h[0],j)>-1&&(g[m]=h[1],m++);else if(a.trim(h[0])===a.trim(b)){g[0]=h[1];break}}else a.fmatter.isObject(f)&&(i?g=a.map(j,function(a){return f[a]}):g[0]=f[b]||"")}return b=g.join(", "),""===b?a.fn.fmatter.defaultFormat(b,c):b},a.fn.fmatter.rowactions=function(b){var c=a(this).closest("tr.jqgrow"),d=a(this).parent(),e=c.attr("id"),f=a(this).closest("table.ui-jqgrid-btable"),g=f[0],h=g.p,i=h.colModel[a.jgrid.getCellIndex(this)],j={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null,restoreAfterError:!0,mtype:"POST",delOptions:{},editOptions:{}},k=function(b,c){a.isFunction(j.afterSave)&&j.afterSave.call(g,b,c),d.find("div.ui-inline-edit,div.ui-inline-del").show(),d.find("div.ui-inline-save,div.ui-inline-cancel").hide()
},l=function(b){a.isFunction(j.afterRestore)&&j.afterRestore.call(g,b),d.find("div.ui-inline-edit,div.ui-inline-del").show(),d.find("div.ui-inline-save,div.ui-inline-cancel").hide()};void 0!==i.formatoptions&&(j=a.extend(j,i.formatoptions)),void 0!==h.editOptions&&(j.editOptions=h.editOptions),void 0!==h.delOptions&&(j.delOptions=h.delOptions),c.hasClass("jqgrid-new-row")&&(j.extraparam[h.prmNames.oper]=h.prmNames.addoper);var m={keys:j.keys,oneditfunc:j.onEdit,successfunc:j.onSuccess,url:j.url,extraparam:j.extraparam,aftersavefunc:k,errorfunc:j.onError,afterrestorefunc:l,restoreAfterError:j.restoreAfterError,mtype:j.mtype};switch(b){case"edit":f.jqGrid("editRow",e,m),d.find("div.ui-inline-edit,div.ui-inline-del").hide(),d.find("div.ui-inline-save,div.ui-inline-cancel").show(),f.triggerHandler("jqGridAfterGridComplete");break;case"save":f.jqGrid("saveRow",e,m)&&(d.find("div.ui-inline-edit,div.ui-inline-del").show(),d.find("div.ui-inline-save,div.ui-inline-cancel").hide(),f.triggerHandler("jqGridAfterGridComplete"));break;case"cancel":f.jqGrid("restoreRow",e,l),d.find("div.ui-inline-edit,div.ui-inline-del").show(),d.find("div.ui-inline-save,div.ui-inline-cancel").hide(),f.triggerHandler("jqGridAfterGridComplete");break;case"del":f.jqGrid("delGridRow",e,j.delOptions);break;case"formedit":f.jqGrid("setSelection",e),f.jqGrid("editGridRow",e,j.editOptions)}},a.fn.fmatter.actions=function(b,c){var d,e={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1},f=c.rowId,g="";return void 0!==c.colModel.formatoptions&&(e=a.extend(e,c.colModel.formatoptions)),void 0===f||a.fmatter.isEmpty(f)?"":(e.editformbutton?(d="id='jEditButton_"+f+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",g+="<div title='"+a.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+d+"><span class='ui-icon ui-icon-pencil'></span></div>"):e.editbutton&&(d="id='jEditButton_"+f+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover') ",g+="<div title='"+a.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+d+"><span class='ui-icon ui-icon-pencil'></span></div>"),e.delbutton&&(d="id='jDeleteButton_"+f+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",g+="<div title='"+a.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+d+"><span class='ui-icon ui-icon-trash'></span></div>"),d="id='jSaveButton_"+f+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",g+="<div title='"+a.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+d+"><span class='ui-icon ui-icon-disk'></span></div>",d="id='jCancelButton_"+f+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",g+="<div title='"+a.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel' "+d+"><span class='ui-icon ui-icon-cancel'></span></div>","<div style='margin-left:8px;'>"+g+"</div>")},a.unformat=function(b,c,d,e){var f,g,h=c.colModel.formatter,i=c.colModel.formatoptions||{},j=/([\.\*\_\'\(\)\{\}\+\?\\])/g,k=c.colModel.unformat||a.fn.fmatter[h]&&a.fn.fmatter[h].unformat;if(void 0!==k&&a.isFunction(k))f=k.call(this,a(b).text(),c,b);else if(void 0!==h&&a.fmatter.isString(h)){var l,m=a.jgrid.formatter||{};switch(h){case"integer":i=a.extend({},m.integer,i),g=i.thousandsSeparator.replace(j,"\\$1"),l=new RegExp(g,"g"),f=a(b).text().replace(l,"");break;case"number":i=a.extend({},m.number,i),g=i.thousandsSeparator.replace(j,"\\$1"),l=new RegExp(g,"g"),f=a(b).text().replace(l,"").replace(i.decimalSeparator,".");break;case"currency":i=a.extend({},m.currency,i),g=i.thousandsSeparator.replace(j,"\\$1"),l=new RegExp(g,"g"),f=a(b).text(),i.prefix&&i.prefix.length&&(f=f.substr(i.prefix.length)),i.suffix&&i.suffix.length&&(f=f.substr(0,f.length-i.suffix.length)),f=f.replace(l,"").replace(i.decimalSeparator,".");break;case"checkbox":var n=c.colModel.editoptions?c.colModel.editoptions.value.split(":"):["Yes","No"];f=a("input",b).is(":checked")?n[0]:n[1];break;case"select":f=a.unformat.select(b,c,d,e);break;case"actions":return"";default:f=a(b).text()}}return void 0!==f?f:e===!0?a(b).text():a.jgrid.htmlDecode(a(b).html())},a.unformat.select=function(b,c,d,e){var f=[],g=a(b).text();if(e===!0)return g;var h=a.extend({},void 0!==c.colModel.formatoptions?c.colModel.formatoptions:c.colModel.editoptions),i=void 0===h.separator?":":h.separator,j=void 0===h.delimiter?";":h.delimiter;if(h.value){var k,l=h.value,m=h.multiple===!0?!0:!1,n=[];if(m&&(n=g.split(","),n=a.map(n,function(b){return a.trim(b)})),a.fmatter.isString(l)){var o,p=l.split(j),q=0;for(o=0;o<p.length;o++)if(k=p[o].split(i),k.length>2&&(k[1]=a.map(k,function(a,b){return b>0?a:void 0}).join(i)),m)a.inArray(k[1],n)>-1&&(f[q]=k[0],q++);else if(a.trim(k[1])===a.trim(g)){f[0]=k[0];break}}else(a.fmatter.isObject(l)||a.isArray(l))&&(m||(n[0]=g),f=a.map(n,function(b){var c;return a.each(l,function(a,d){return d===b?(c=a,!1):void 0}),void 0!==c?c:void 0}));return f.join(", ")}return g||""},a.unformat.date=function(b,c){var d=a.jgrid.formatter.date||{};return void 0!==c.formatoptions&&(d=a.extend({},d,c.formatoptions)),a.fmatter.isEmpty(b)?a.fn.fmatter.defaultFormat(b,c):a.fmatter.util.DateFormat(d.newformat,b,d.srcformat,d)}}(jQuery),function(){var a;a=function(){function a(a,b){this.init(a,b)}return a.prototype.init=function(a,b){var c;return c=$(a),this.$element=c,this.$el=c,this.$grid=c,this.gridId=c.attr("id"),this.gboxId="gbox_"+this.gridId,this.options=this.getOptions(b),this.options.actionPopup&&this.addRowActionColumn(),c.jqGrid(this.options),this.responsiveResize()},a.prototype.getOptions=function(a){var b,c=this;return a=$.extend({},$.fn.gridz.defaults,a),b=a.gridComplete,a.gridComplete=function(){return c.gridComplete.apply(c),$.isFunction(b)&&b.apply(c,arguments),c.$grid.trigger("gridComplete")},a.actionPopup&&a.sortable&&(a.sortable={exclude:"#"+this.gridId+"_row_action_col"}),a},a.prototype.gridComplete=function(){return this.options.actionPopup?this.actionPopupSetup():void 0},a.prototype.responsiveResize=function(){var a,b;return a=this.$element,b="#gbox_"+a.attr("id"),$(window).on("resize",function(){var c,d,e;return d=$(b).parent().width(),c=$(b).width(),e=d-1,Math.abs(e-c)>2?a.setGridWidth(e):void 0})},a.prototype.addRowActionColumn=function(){var a,b,c;return c=this,b=this.options,a="gbox_"+this.$element.attr("id"),b.colModel.unshift({name:"row_action_col",label:" ",width:20,sortable:!1,search:!1,hidedlg:!0,resizable:!1,fixed:!0,formatter:function(d,e,f){var g;return g=b.actionPopup.cellFormatter||c.actionPopupFormatter,g(a,d,e,f)}})},a.prototype.actionPopupFormatter=function(a){return'<a class="jqg-row-action" data-toggle="popover" href="#"\n   data-container="#'+a+'"><i class="icon-cog"></i></a>'},a.prototype.actionPopupSetup=function(){var a,b,c;return c=this,b=this.options,a=void 0,a=b.actionPopup.menuList?b.actionPopup.menuList:'<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">\n  <li><a href="#" class="row_action_show" data-dismiss="clickover">\n    <i class="icon-eye-open"></i>show</a>\n  </li>\n  <li><a href="#" class="row_action_edit" data-dismiss="clickover">\n    <i class="icon-edit"></i>edit</a>\n  </li>\n  <li><a href="#" class="row_action_delete" data-dismiss="clickover">\n    <i class="icon-trash"></i>delete</a>\n  </li>\n</ul>',$(".jqg-row-action").clickover({html:!0,content:a,template:'<div class="popover row-action-popover">\n  <div class="arrow"></div>\n  <div class="popover-content dropdown clearfix" style="padding: 0;"></div>\n</div>',onShown:function(){return c.actionPopupOnShow.call(c,this)}})},a.prototype.actionPopupOnShow=function(a){var b,c,d,e;return e=this,b=this.$element,d=$(a.$element,b.rows).parents("tr:first").attr("id"),b.data("actionRowId",d),b.jqGrid("resetSelection"),b.jqGrid("setSelection",d),c=$("#"+e.gboxId+" .dropdown-menu"),c.on("click","li a.row_action_show",function(){return b.trigger("showAction")}),c.on("click","li a.row_action_edit",function(){return b.trigger("editAction",[d,e])}),c.on("click","li a.row_action_delete",function(){return b.trigger("deleteAction",[d])})},a}(),$.extend(!0,window,{grinder:{Grid:a}}),$.fn.gridz=function(b){var c,d;return"string"==typeof b?(d=Array.prototype.slice.call(arguments,1),c=$(this).data("gridz"),c&&c[b]&&c[b].apply(this,d),$(this).jqGrid(arguments)):this.each(function(){var d,e;return d=$(this),c=d.data("gridz"),e="object"==typeof b?b:{},c?void 0:d.data("gridz",c=new a(this,e))})},$.fn.gridz.Constructor=a,$.fn.gridz.defaults={prmNames:{page:"page",rows:"max",sort:"sort",order:"order"},jsonReader:{repeatitems:!1},datatype:"json",mtype:"GET",rowNum:20,rowList:[10,20,50,100],altRows:!0,shrinkToFit:!1,autowidth:!0,height:"100%",sortable:!0,multiselect:!0,pager:"#gridPager",gridComplete:null,actionPopup:{formatter:null,menuList:null}},$.extend($.fn.fmatter,{okIcon:function(a){return a?"<i class='icon-ok'></i>":""},editActionLink:function(a){return'<a class="editActionLink" href="#">'+a+"</a>"}})}.call(this);