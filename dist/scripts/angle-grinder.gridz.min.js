!function(){var a,b,c,d,e;d=angular.module("angleGrinder.gridz",["ui.bootstrap"]),d.directive("agGrid",["hasSearchFilters",function(a){var b;return b=function(b,c,d){var e,f,g;return e=$("#grid",c),f=b.$eval(d.agGrid),e.gridz(f),g=function(a){return b.$apply(function(){return b.editDialog(a)})},e.on("editAction",function(a,b){return a.preventDefault(),g(b)}),e.on("click","a.editActionLink",function(a){var b;return a.preventDefault(),b=$(this).parents("tr:first").attr("id"),g(b)}),e.on("deleteAction",function(a,c){return a.preventDefault(),b.$apply(function(){return b.deleteItem(c)})}),b.$on("itemUpdated",function(a,b){var c;return e.jqGrid("getInd",b.id)?e.jqGrid("setRowData",b.id,b):e.jqGrid("addRowData",b.id,b,"first"),c=e[0].rows.namedItem(b.id),$(c).css("background-color","#DFF0D8"),$(c).delay(100).fadeOut("medium",function(){return $(c).css("background-color","")}).fadeIn("fast")}),b.$on("itemDeleted",function(){return e.trigger("reloadGrid")}),b.$on("searchUpdated",function(b,c){var d;return d={search:a(c),postData:{filters:c}},e.setGridParam(d).trigger("reloadGrid")})},{restrict:"A",template:'<table id="grid"></table>\n<div id="gridPager"></div>',link:b}}]),b=function(){function a(a,b,c,d,e,f){a.item=d,a.createNew=e,a.closeEditDialog=function(){return c.close(a.item)},a.save=function(){return d.save(function(c){return b.$broadcast("itemUpdated",f(c)),a.closeEditDialog()})}}return a.$inject=["$scope","$rootScope","dialog","item","createNew","flatten"],a}(),d.controller("EditItemCtrl",b),a=function(){function a(a){this.$dialog=a}return a.$inject=["$dialog"],a.prototype.open=function(a,b){var c;return c=this.$dialog.dialog({backdropFade:!1,dialogFade:!1,resolve:{item:function(){return b},createNew:function(){return null==b.id}}}),c.handledEscapeKey=function(a){return 27!==a.which||(a.preventDefault(),c.$scope.editForm.$dirty)?void 0:(c.close(),c.$scope.$apply())},c.handleBackDropClick=function(a){return a.preventDefault(),c.$scope.editForm.$dirty?void 0:(c.close(),c.$scope.$apply())},c.open(a,"EditItemCtrl")},a}(),d.service("editDialog",a),c=function(a,b){var c,d,e,f;return null==b&&(b={delimiter:"."}),c=b.delimiter,d=function(a,b){return b?b+c+a:a},f=function(a,c){return Object.keys(a).forEach(function(g){var h,i,j;return h=b.safe&&Array.isArray(a[g]),j=Object.prototype.toString.call(a[g]),i="[object Object]"===j||"[object Array]"===j,!h&&i?f(a[g],d(g,c)):e[d(g,c)]=a[g]})},e={},f(a),e},d.value("flatten",c),e=function(a){var b,c;for(c in a)if(b=a[c],null!=b&&""!==b.trim())return!0;return!1},d.value("hasSearchFilters",e)}.call(this);