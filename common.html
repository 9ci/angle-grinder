---
layout: default
title: Common services
slug: common
show_sidebar: true
lead: "Common services used in various places of the app"
base_url: "../"
---

<!-- Common
================================================== -->

<div class="bs-docs-section">
  <div class="page-header">
    <h1 id="gridz">Common services</h1>
  </div>

  <h3 id="common-pathWithContext">pathWithContext</h3>

  This service might be used for appending the context path to the given url.
  It helps to make the app more context path agnostic.

  <h4 id="common-pathWithContext-usage">Usage</h4>

{% highlight coffeescript %}
class UsersListCtrl
  @$inject = ["$scope", "pathWithContext"]
    constructor: ($scope, pathWithContext) ->

  $scope.gridOptions =
    # now the grid data url will be context aware
    url: pathWithContext("/api/users")
    # ...other grid options

angular.module("myApp")
  .controller("UsersListCtrl", UsersListCtrl)
{% endhighlight %}

  <h4 id="common-pathWithContext-configuration">Configuration</h4>

  Inside grails application the context path might be taken from <code>request.contextPath</code> property
  and assigned to the <code>body</code> html element.

{% highlight html %}
<body data-context-path="${request.contextPath}">
</body>
{% endhighlight %}

  During AngularJS application initialization this variable could be used for configuring the
  <code>pathWithContext</code> service provider.

{% highlight coffeescript %}
app = angular.module("myApp", [
  "angleGrinder.common"
])

# Sample `pathWithContext` configuration block
app.config [
  "pathWithContextProvider", (pathWithContextProvider) ->
    contextPath = $("body").data("context-path")
    pathWithContextProvider.setContextPath(contextPath) if contextPath?
]
{% endhighlight %}

  <h3 id="common-pendingRequests">pendingRequests</h3>

  Service designed for the internal usage.<br/>
  For example it is used for enabling / disabling <code>ag-submit-button</code> and <code>ag-delete-button</code>.

  <h4 id="common-pendingRequests-usage">Usage</h4>

{% highlight coffeescript %}
app = angular.module("myApp", [
  "angleGrinder.common"
])

class MyCtrl
  @$inject = ["$scope", "pendingRequests"]
  constructor: ($scope, pendingRequests) ->

    # will return `true` if any http request is in progress
    pendingRequests.any()

    # shortcut for `pendingRequests.any()`
    pendingRequests()

    # returns `true` if any http DELETE request is in progress
    pendingRequests.for("DELETE")

    # returns `true` if POST or PUT request is in progress
    # it can accept multiple arguments with other http methods
    pendingRequests.for("POST", "PUT")

app.controller("MyCtrl", MyCtrl)
{% endhighlight %}

</div>
